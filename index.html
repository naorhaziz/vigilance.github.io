<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vigilance AI â€“ Brand Console</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Leaflet CSS for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- AOS (Animate On Scroll) -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <style>
        /* ========================================
           CSS VARIABLES & RESET - DARK THEME
        ======================================== */
        :root {
            --primary-color: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: #60a5fa;
            --primary-glow: rgba(59, 130, 246, 0.3);

            --accent-cyan: #06b6d4;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;

            --success: #10b981;
            --success-glow: rgba(16, 185, 129, 0.3);
            --warning: #f59e0b;
            --warning-glow: rgba(245, 158, 11, 0.3);
            --danger: #ef4444;
            --danger-glow: rgba(239, 68, 68, 0.3);

            --bg-primary: #0a0e27;
            --bg-secondary: #111827;
            --bg-tertiary: #1e293b;
            --bg-card: rgba(30, 41, 59, 0.8);
            --bg-card-hover: rgba(51, 65, 85, 0.9);

            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;

            --border-color: rgba(148, 163, 184, 0.1);
            --border-glow: rgba(59, 130, 246, 0.2);

            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.6);
            --shadow-glow: 0 0 20px var(--primary-glow);

            --radius: 12px;
            --radius-lg: 16px;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;

            --sidebar-width: 260px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated background particles */
        .background-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: var(--primary-color);
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-100px) translateX(50px); }
            50% { transform: translateY(-50px) translateX(-50px); }
            75% { transform: translateY(-150px) translateX(100px); }
        }

        /* ========================================
           LAYOUT - SIDEBAR + MAIN
        ======================================== */
        .app-layout {
            display: flex;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* ========================================
           SIDEBAR
        ======================================== */
        .sidebar {
            width: var(--sidebar-width);
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-color);
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            padding: var(--spacing-xl) 0;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 0 var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        /* Vigilance Logo Container */
        .vigilance-logo-container {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 0;
            margin-bottom: var(--spacing-md);
            cursor: pointer;
        }

        .vigilance-shield {
            position: relative;
            width: 52px;
            height: 52px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(6, 182, 212, 0.2));
            border-radius: 12px;
            border: 2px solid rgba(59, 130, 246, 0.4);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3), inset 0 0 20px rgba(59, 130, 246, 0.1);
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .vigilance-shield::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shieldGlow 3s infinite;
        }

        @keyframes shieldGlow {
            0%, 100% {
                transform: rotate(0deg);
                opacity: 0.5;
            }
            50% {
                transform: rotate(180deg);
                opacity: 1;
            }
        }

        .vigilance-shield i {
            font-size: 28px;
            color: var(--primary-light);
            filter: drop-shadow(0 0 15px var(--primary-glow));
            z-index: 2;
            position: relative;
        }

        .shield-shine {
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shine 4s infinite;
            z-index: 3;
        }

        @keyframes shine {
            0% {
                left: -100%;
            }
            50%, 100% {
                left: 200%;
            }
        }

        .vigilance-shield:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.5), inset 0 0 30px rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.6);
        }

        .vigilance-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .vigilance-brand {
            font-size: 20px;
            font-weight: 900;
            letter-spacing: 1px;
            background: linear-gradient(135deg, var(--primary-light), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
        }

        .vigilance-ai {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-muted);
            letter-spacing: 3px;
            line-height: 1;
        }

        .sidebar-section-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-muted);
            padding: 0 var(--spacing-lg);
            margin-bottom: var(--spacing-md);
        }

        .sidebar-nav {
            flex: 1;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md) var(--spacing-lg);
            margin: 0 var(--spacing-sm);
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--radius);
            transition: all 0.2s ease;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            position: relative;
        }

        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 18px;
        }

        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-light);
        }

        .nav-item.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(6, 182, 212, 0.1));
            color: var(--primary-color);
            box-shadow: 0 0 20px var(--primary-glow);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 0 3px 3px 0;
        }

        .sidebar-footer {
            padding: var(--spacing-lg);
            border-top: 1px solid var(--border-color);
            margin-top: var(--spacing-lg);
        }

        .sidebar-footer-text {
            font-size: 11px;
            color: var(--text-muted);
            text-align: center;
        }

        /* Mobile hamburger */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: var(--spacing-md);
            left: var(--spacing-md);
            z-index: 101;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: var(--spacing-sm) var(--spacing-md);
            color: var(--text-primary);
            cursor: pointer;
            backdrop-filter: blur(20px);
        }

        /* ========================================
           MAIN CONTENT AREA
        ======================================== */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* ========================================
           TOP BAR
        ======================================== */
        .top-bar {
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            padding: var(--spacing-md) var(--spacing-xl);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .top-bar-left h1 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
        }

        .language-toggle {
            position: relative;
            display: inline-block;
        }

        .language-toggle-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            color: var(--text-primary);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .language-toggle-btn:hover {
            background: rgba(30, 41, 59, 0.8);
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.3);
        }

        .language-toggle-btn i {
            font-size: 10px;
            color: var(--text-secondary);
            transition: transform 0.3s ease;
        }

        .language-toggle.open .language-toggle-btn i {
            transform: rotate(180deg);
        }

        .language-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            min-width: 160px;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 8px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .language-toggle.open .language-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .language-dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            color: var(--text-primary);
            font-size: 13px;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .language-dropdown-item:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-color);
        }

        .language-dropdown-item.active {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 0 10px var(--primary-glow);
        }

        .language-dropdown-item .flag {
            font-size: 16px;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 20px;
            transition: color 0.2s ease;
        }

        .notification-bell:hover {
            color: var(--primary-color);
        }

        .notification-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: var(--danger);
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px var(--danger-glow);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.9;
            }
        }

        .brand-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding-left: var(--spacing-lg);
            border-left: 1px solid var(--border-color);
        }

        .brand-avatar {
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .netflix-n-icon {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            background: #E50914;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 24px;
            color: white;
            font-family: 'Netflix Sans', 'Helvetica Neue', Arial, sans-serif;
            letter-spacing: -1px;
            box-shadow: 0 0 20px rgba(229, 9, 20, 0.4);
            transition: all 0.3s ease;
        }

        .techcorp-icon {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            background: #0066CC;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 24px;
            color: white;
            font-family: 'Inter', -apple-system, sans-serif;
            box-shadow: 0 0 20px rgba(0, 102, 204, 0.4);
            transition: all 0.3s ease;
        }

        .israel-icon {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            background: white !important;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 400;
            font-size: 18px;
            font-family: 'Inter', -apple-system, sans-serif;
            box-shadow: 0 0 15px rgba(0, 56, 184, 0.3) !important;
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid #d1d5db;
            color: #0038b8;
        }

        .israel-icon::before {
            content: '';
            position: absolute;
            top: 7px;
            left: 5px;
            right: 5px;
            height: 3px;
            background: #0038b8;
            z-index: 1;
        }

        .israel-icon::after {
            content: '';
            position: absolute;
            bottom: 7px;
            left: 5px;
            right: 5px;
            height: 3px;
            background: #0038b8;
            z-index: 1;
        }

        .brand-info:hover #brand-icon {
            transform: scale(1.05);
        }

        .brand-details {
            display: flex;
            flex-direction: column;
        }

        .brand-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .brand-subtitle {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* ========================================
           NOTIFICATION PANEL
        ======================================== */
        .notification-panel {
            position: fixed;
            top: 70px;
            right: var(--spacing-xl);
            width: 420px;
            max-height: 600px;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            display: none;
            flex-direction: column;
            animation: slideDown 0.3s ease;
        }

        .notification-panel.active {
            display: flex;
        }

        .tenant-switcher-panel {
            position: fixed;
            top: 70px;
            right: var(--spacing-xl);
            width: 420px;
            max-height: 600px;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            flex-direction: column;
            animation: slideDown 0.3s ease;
            overflow-y: auto;
        }

        .tenant-option:hover {
            background: var(--bg-card-hover) !important;
            border-color: var(--primary-color) !important;
            transform: translateY(-2px);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100px);
            }
        }

        .notification-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
        }

        .notification-header h3 {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .notification-list {
            flex: 1;
            overflow-y: auto;
            padding: var(--spacing-sm);
        }

        .notification-item {
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-sm);
            background: rgba(30, 41, 59, 0.5);
            border-radius: var(--radius);
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .notification-item:hover {
            background: var(--bg-card-hover);
            transform: translateX(4px);
        }

        .notification-item.high {
            border-left-color: var(--danger);
        }

        .notification-item.medium {
            border-left-color: var(--warning);
        }

        .notification-item.low {
            border-left-color: var(--success);
        }

        .notification-content {
            font-size: 14px;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .notification-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: var(--text-muted);
        }

        .notification-action {
            color: var(--primary-color);
            font-weight: 600;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .notification-action:hover {
            color: var(--primary-light);
        }

        /* ========================================
           CONTENT CONTAINER
        ======================================== */
        .content-container {
            flex: 1;
            padding: var(--spacing-2xl) var(--spacing-xl);
            max-width: 1600px;
            width: 100%;
        }

        .screen {
            display: none;
        }

        .screen.active {
            display: block;
            animation: fadeInUp 0.4s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ========================================
           SHARED COMPONENTS (from original)
        ======================================== */
        .section-header {
            margin-bottom: var(--spacing-xl);
        }

        .section-title {
            font-size: 32px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
            letter-spacing: -0.5px;
        }

        .section-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
        }

        /* KPI Cards */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        .kpi-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl), var(--shadow-glow);
            border-color: var(--border-glow);
        }

        .kpi-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            margin-bottom: var(--spacing-md);
            transition: all 0.5s ease;
        }

        .kpi-icon i {
            transition: all 0.5s ease;
        }

        .kpi-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: var(--spacing-sm);
        }

        .kpi-value {
            font-size: 36px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
            line-height: 1;
            transition: all 0.5s ease;
        }

        .chip {
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            border: 1px solid;
            transition: all 0.5s ease;
        }

        .chip.success {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
            border-color: rgba(16, 185, 129, 0.3);
        }

        .chip.warning {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
            border-color: rgba(245, 158, 11, 0.3);
        }

        .chip.danger {
            background: rgba(239, 68, 68, 0.15);
            color: var(--danger);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .chip.info {
            background: rgba(6, 182, 212, 0.15);
            color: var(--accent-cyan);
            border-color: rgba(6, 182, 212, 0.3);
        }

        .trend {
            font-size: 13px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .trend.up {
            color: var(--success);
        }

        .trend.down {
            color: var(--danger);
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .chart-card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .chart-card:hover {
            border-color: var(--border-glow);
            box-shadow: var(--shadow-lg);
        }

        .chart-card.col-12 { grid-column: span 12; }
        .chart-card.col-6 { grid-column: span 6; }
        .chart-card.col-4 { grid-column: span 4; }

        .chart-header {
            margin-bottom: var(--spacing-lg);
        }

        .chart-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .chart-title i {
            color: var(--primary-color);
        }

        .chart-subtitle {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .chart-canvas-wrapper {
            position: relative;
            height: 280px;
        }

        .chart-canvas-wrapper.large {
            height: 350px;
        }

        /* Map */
        .map-container {
            height: 450px;
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        #geo-map {
            height: 100%;
            width: 100%;
        }

        .leaflet-popup-content-wrapper {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
        }

        .leaflet-popup-tip {
            background: var(--bg-tertiary);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-cyan));
            color: white;
            box-shadow: 0 4px 15px var(--primary-glow);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--primary-glow);
        }

        .btn-secondary {
            background: rgba(30, 41, 59, 0.8);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-glow);
        }

        /* Tables */
        .data-table {
            width: 100%;
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .data-table thead {
            background: rgba(30, 41, 59, 0.5);
        }

        .data-table th {
            padding: var(--spacing-md) var(--spacing-lg);
            text-align: left;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .data-table td {
            padding: var(--spacing-md) var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .data-table tbody tr {
            transition: background 0.2s ease;
        }

        .data-table tbody tr:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        /* Report Button */
        .btn-report {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
        }

        .btn-report:hover {
            background: #b91c1c;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.5);
            transform: translateY(-1px);
        }

        .btn-report:active {
            transform: translateY(0);
            box-shadow: 0 1px 4px rgba(220, 38, 38, 0.4);
        }

        .btn-report i {
            font-size: 12px;
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--border-color);
            margin-bottom: var(--spacing-lg);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            border-color: rgba(59, 130, 246, 0.3);
        }

        .card-header {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* Form elements */
        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: var(--spacing-md);
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--primary-glow);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(100, 116, 139, 0.3);
            transition: 0.3s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Radio buttons */
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .radio-option {
            display: flex;
            align-items: center;
            padding: var(--spacing-md);
            background: rgba(30, 41, 59, 0.3);
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .radio-option:hover {
            border-color: var(--primary-color);
            background: rgba(59, 130, 246, 0.1);
        }

        .radio-option input[type="radio"] {
            margin-right: var(--spacing-md);
            width: 18px;
            height: 18px;
        }

        .radio-option.selected {
            border-color: var(--primary-color);
            background: rgba(59, 130, 246, 0.15);
        }

        /* Report cards */
        .report-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--border-color);
            margin-bottom: var(--spacing-lg);
            transition: all 0.3s ease;
        }

        .report-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-glow);
        }

        .report-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--spacing-md);
        }

        .report-card-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .report-card-meta {
            font-size: 12px;
            color: var(--text-muted);
        }

        .report-card-description {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-lg);
            line-height: 1.6;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-xl);
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 24px;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .modal-close:hover {
            color: var(--text-primary);
        }

        /* Loading */
        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.5);
        }

        /* ========================================
           RESPONSIVE
        ======================================== */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .mobile-menu-toggle {
                display: block;
            }

            .brand-details {
                display: none;
            }

            .chart-card.col-6 {
                grid-column: span 12;
            }
        }

        @media (max-width: 768px) {
            .top-bar {
                padding: var(--spacing-md);
            }

            .top-bar-left h1 {
                font-size: 18px;
            }

            .content-container {
                padding: var(--spacing-lg) var(--spacing-md);
            }

            .kpi-grid {
                grid-template-columns: 1fr;
            }

            .notification-panel {
                right: var(--spacing-md);
                left: var(--spacing-md);
                width: auto;
            }
        }

        /* Additional utility classes */
        .mb-lg { margin-bottom: var(--spacing-lg); }
        .mt-lg { margin-top: var(--spacing-lg); }
        .text-center { text-align: center; }

        /* Strategy cards enhancements */
        .strategy-card {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .strategy-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-cyan));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .strategy-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
            border-color: rgba(59, 130, 246, 0.4);
        }

        .strategy-card:hover::before {
            opacity: 1;
        }

        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Loading spinner animation */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .fa-spinner {
            animation: spin 1s linear infinite;
        }

        /* Enhanced table rows */
        .data-table tbody tr {
            transition: all 0.2s ease;
        }

        .data-table tbody tr:hover {
            background: rgba(59, 130, 246, 0.08);
            transform: translateX(4px);
        }

        /* Improved chip styles */
        .chip {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            transition: all 0.2s ease;
        }

        .chip:hover {
            transform: scale(1.05);
        }

        /* Report cards enhancement */
        .report-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .report-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.4);
            border-color: rgba(59, 130, 246, 0.5);
        }

        /* Enhanced button disabled state */
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Notification panel enhancement */
        .notification-panel {
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
        }

        /* KPI value glow effect */
        .kpi-value {
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        /* Clickable cards */
        .clickable-card {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .clickable-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 16px 32px rgba(0, 0, 0, 0.5);
            border-color: rgba(59, 130, 246, 0.6);
        }

        /* Live indicator */
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: rgba(239, 68, 68, 0.15);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid rgba(239, 68, 68, 0.3);
            animation: liveGlow 2s infinite;
        }

        @keyframes liveGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(239, 68, 68, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
            }
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--danger);
            border-radius: 50%;
            animation: livePulse 1.5s infinite;
        }

        @keyframes livePulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.3);
                opacity: 0.7;
            }
        }

        .last-update {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 8px;
            font-style: italic;
        }

        .last-update span {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Counter animation */
        @keyframes numberChange {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
                color: var(--primary-light);
            }
        }

        .number-updating {
            animation: numberChange 0.5s ease;
        }

        /* Activity pulse on cards */
        .activity-pulse {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 10px;
            height: 10px;
            background: var(--success);
            border-radius: 50%;
            animation: activityPulse 2s infinite;
        }

        @keyframes activityPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }

        /* Streaming indicator */
        .streaming-bar {
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            animation: streaming 2s linear infinite;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            opacity: 0.5;
        }

        @keyframes streaming {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
    </style>
</head>
<body>
    <!-- Background Particles -->
    <div class="background-particles">
        <div class="particle" style="width: 100px; height: 100px; top: 10%; left: 10%; animation-delay: 0s;"></div>
        <div class="particle" style="width: 60px; height: 60px; top: 60%; left: 80%; animation-delay: 2s;"></div>
        <div class="particle" style="width: 80px; height: 80px; top: 80%; left: 20%; animation-delay: 4s;"></div>
        <div class="particle" style="width: 40px; height: 40px; top: 30%; right: 15%; animation-delay: 6s;"></div>
    </div>

    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleMobileSidebar()">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Main App Layout -->
    <div class="app-layout">
        <!-- ========================================
             SIDEBAR
        ======================================== -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="vigilance-logo-container" onclick="navigateTo('overview')">
                    <div class="vigilance-shield">
                        <i class="fas fa-shield-alt"></i>
                        <div class="shield-shine"></div>
                    </div>
                    <div class="vigilance-text">
                        <div class="vigilance-brand">VIGILANCE</div>
                        <div class="vigilance-ai">AI</div>
                    </div>
                </div>
            </div>

            <div class="sidebar-section-title" data-i18n="brand-console">Brand Console</div>

            <nav class="sidebar-nav">
                <a class="nav-item active" data-page="overview" onclick="navigateTo('overview')">
                    <i class="fas fa-chart-line"></i>
                    <span data-i18n="nav-overview">Overview</span>
                </a>
                <a class="nav-item" data-page="incidents" onclick="navigateTo('incidents')">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span data-i18n="nav-incidents">Incidents</span>
                </a>
                <a class="nav-item" data-page="influencers" onclick="navigateTo('influencers')">
                    <i class="fas fa-users"></i>
                    <span data-i18n="nav-influencers">Influencers</span>
                </a>
                <a class="nav-item" data-page="reports" onclick="navigateTo('reports')">
                    <i class="fas fa-file-alt"></i>
                    <span data-i18n="nav-reports">Reports</span>
                </a>
                <a class="nav-item" data-page="settings" onclick="navigateTo('settings')">
                    <i class="fas fa-cog"></i>
                    <span data-i18n="nav-settings">Settings</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="sidebar-footer-text">Â© 2025 Vigilance AI</div>
            </div>
        </aside>

        <!-- ========================================
             MAIN CONTENT
        ======================================== -->
        <div class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="top-bar-left">
                    <h1 id="page-title" data-i18n="page-title-overview">Overview</h1>
                </div>
                <div class="top-bar-right">
                    <!-- Language Toggle -->
                    <div class="language-toggle" id="language-toggle">
                        <div class="language-toggle-btn" onclick="toggleLanguageDropdown()">
                            <span class="flag" id="current-language-flag">ðŸ‡ºðŸ‡¸</span>
                            <span id="current-language-code">EN</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="language-dropdown">
                            <div class="language-dropdown-item active" data-lang="en" onclick="selectLanguage('en')">
                                <span class="flag">ðŸ‡ºðŸ‡¸</span>
                                <span>English</span>
                            </div>
                            <div class="language-dropdown-item" data-lang="fr" onclick="selectLanguage('fr')">
                                <span class="flag">ðŸ‡«ðŸ‡·</span>
                                <span>FranÃ§ais</span>
                            </div>
                        </div>
                    </div>

                    <!-- Notification Bell -->
                    <div class="notification-bell" onclick="toggleNotifications()">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge" id="notification-badge">5</span>
                    </div>

                    <!-- Brand Info -->
                    <div class="brand-info" id="brand-info" onclick="toggleTenantSwitcher()" style="cursor: pointer; user-select: none;" title="Click to switch tenant">
                        <div class="brand-avatar">
                            <div id="brand-icon" class="netflix-n-icon">N</div>
                        </div>
                        <div class="brand-details">
                            <div class="brand-name" id="brand-name">Netflix</div>
                            <div class="brand-subtitle" id="brand-subtitle">Streaming Entertainment Â· Global</div>
                        </div>
                        <i class="fas fa-chevron-down" style="margin-left: 12px; color: var(--text-muted); font-size: 12px;"></i>
                    </div>
                </div>
            </header>

            <!-- Notification Panel -->
            <div class="notification-panel" id="notification-panel">
                <div class="notification-header">
                    <h3 data-i18n="notifications-title">Notifications</h3>
                </div>
                <div class="notification-list" id="notification-list">
                    <!-- Notifications will be rendered here -->
                </div>
            </div>

            <!-- Tenant Switcher Dropdown -->
            <div class="tenant-switcher-panel" id="tenant-switcher" style="display: none;">
                <div class="notification-header">
                    <h3>Switch Brand</h3>
                </div>
                <div style="padding: 16px;">
                    <div class="tenant-option" onclick="switchTenant('netflix')" style="padding: 16px; margin-bottom: 12px; background: var(--bg-card); border-radius: var(--radius); cursor: pointer; border: 2px solid transparent; transition: all 0.2s ease;">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <div class="netflix-n-icon" style="width: 48px; height: 48px; font-size: 28px;">N</div>
                            <div style="flex: 1;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Netflix</div>
                                <div style="font-size: 12px; color: var(--text-muted);">Streaming Entertainment Â· Global</div>
                                <div style="margin-top: 8px; display: flex; gap: 8px; flex-wrap: wrap;">
                                    <span class="chip success" style="font-size: 11px;">67% Positive</span>
                                    <span class="chip warning" style="font-size: 11px;">5 Active Incidents</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tenant-option" onclick="switchTenant('israel')" style="padding: 16px; background: var(--bg-card); border-radius: var(--radius); cursor: pointer; border: 2px solid transparent; transition: all 0.2s ease;">
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <div class="israel-icon" style="width: 48px; height: 48px; font-size: 22px;">âœ¡</div>
                            <div style="flex: 1;">
                                <div style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">Israel</div>
                                <div style="font-size: 12px; color: var(--text-muted);">Nation Brand Â· Middle East</div>
                                <div style="margin-top: 8px; display: flex; gap: 8px; flex-wrap: wrap;">
                                    <span class="chip danger" style="font-size: 11px;">28% Negative Trend</span>
                                    <span class="chip danger" style="font-size: 11px;">6 Critical Issues</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Container -->
            <div class="content-container">
                <!-- SCREEN 1: OVERVIEW (Original Dashboard) -->
                <section id="overview-screen" class="screen active">
                    <div class="section-header">
                        <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
                            <h2 class="section-title" id="overview-title" data-i18n="overview-title" style="margin:0;">Brand Overview â€“ Netflix</h2>
                            <span class="live-indicator">
                                <span class="live-dot"></span>
                                <span style="font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;">LIVE</span>
                            </span>
                        </div>
                        <p class="section-subtitle" data-i18n="overview-subtitle">Real-time risk and sentiment across channels</p>
                        <div class="last-update" id="last-update">Last updated: <span id="live-timestamp">Just now</span></div>
                    </div>

                    <!-- KPI Cards -->
                    <div class="kpi-grid">
                        <div class="kpi-card" style="position:relative;overflow:hidden;">
                            <div class="streaming-bar"></div>
                            <div class="activity-pulse"></div>
                            <div class="kpi-icon" id="sentiment-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--success);">
                                <i class="fas fa-smile"></i>
                            </div>
                            <div class="kpi-label" data-i18n="kpi-sentiment">General Sentiment</div>
                            <div class="kpi-value" id="live-sentiment">67<span style="font-size: 20px; color: var(--text-secondary);">/100</span></div>
                            <span class="chip success" id="sentiment-chip"><i class="fas fa-check-circle"></i> <span data-i18n="mostly-positive">Mostly Positive</span></span>
                        </div>

                        <div class="kpi-card" style="position:relative;overflow:hidden;">
                            <div class="streaming-bar" style="animation-delay: 0.5s;"></div>
                            <div class="activity-pulse" style="animation-delay: 0.3s;"></div>
                            <div class="kpi-icon" id="volume-icon" style="background: rgba(6, 182, 212, 0.1); color: var(--accent-cyan);">
                                <i class="fas fa-comments"></i>
                            </div>
                            <div class="kpi-label" data-i18n="kpi-volume">Conversation Volume (24h)</div>
                            <div class="kpi-value" id="live-volume">2.4M</div>
                            <span class="trend" id="volume-trend"><i class="fas fa-arrow-up"></i> <span id="live-volume-trend">+12.3%</span></span>
                        </div>

                        <div class="kpi-card" style="position:relative;overflow:hidden;">
                            <div class="streaming-bar" style="animation-delay: 1s;"></div>
                            <div class="kpi-icon" id="risk-icon" style="background: rgba(245, 158, 11, 0.1); color: var(--warning);">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="kpi-label" data-i18n="kpi-risk">Risk Level</div>
                            <div class="kpi-value" id="risk-value" style="font-size: 28px; color: var(--warning);">Moderate</div>
                            <span class="chip warning" id="risk-chip"><i class="fas fa-eye"></i> <span data-i18n="vigilance-required">Vigilance Required</span></span>
                        </div>

                        <div class="kpi-card" style="position:relative;overflow:hidden;">
                            <div class="streaming-bar" style="animation-delay: 1.5s;"></div>
                            <div class="activity-pulse" id="incidents-pulse" style="background:var(--danger);animation-delay: 0.7s;"></div>
                            <div class="kpi-icon" id="incidents-icon" style="background: rgba(239, 68, 68, 0.1); color: var(--danger);">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="kpi-label" data-i18n="kpi-incidents">Active Incidents</div>
                            <div class="kpi-value" id="live-incidents">5</div>
                            <span style="font-size: 12px; color: var(--text-secondary);" id="live-incidents-detail">3 high priority, 2 monitoring</span>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="charts-grid">
                        <div class="chart-card col-12">
                            <div class="chart-header">
                                <div class="chart-title">
                                    <i class="fas fa-chart-area"></i>
                                    <span data-i18n="chart-sentiment-time">Sentiment Over Time</span>
                                </div>
                                <div class="chart-subtitle" data-i18n="chart-sentiment-subtitle">Last 7 days â€“ Multi-channel sentiment analysis</div>
                            </div>
                            <div class="chart-canvas-wrapper large">
                                <canvas id="sentiment-chart"></canvas>
                            </div>
                        </div>

                        <div class="chart-card col-6">
                            <div class="chart-header">
                                <div class="chart-title">
                                    <i class="fas fa-chart-bar"></i>
                                    <span data-i18n="chart-channels">Channel Breakdown</span>
                                </div>
                                <div class="chart-subtitle" data-i18n="chart-channels-subtitle">Share of conversation by platform</div>
                            </div>
                            <div class="chart-canvas-wrapper">
                                <canvas id="channel-chart"></canvas>
                            </div>
                        </div>

                        <div class="chart-card col-6">
                            <div class="chart-header">
                                <div class="chart-title">
                                    <i class="fas fa-chart-pie"></i>
                                    <span data-i18n="chart-threats">Threat Distribution</span>
                                </div>
                                <div class="chart-subtitle" data-i18n="chart-threats-subtitle">Incident types breakdown</div>
                            </div>
                            <div class="chart-canvas-wrapper">
                                <canvas id="threat-chart"></canvas>
                            </div>
                        </div>

                        <div class="chart-card col-12">
                            <div class="chart-header">
                                <div class="chart-title">
                                    <i class="fas fa-globe"></i>
                                    <span data-i18n="chart-geo">Geographic Sentiment Distribution</span>
                                </div>
                                <div class="chart-subtitle" data-i18n="chart-geo-subtitle">Interactive map â€“ Click markers for details</div>
                            </div>
                            <div class="map-container">
                                <div id="geo-map"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- SCREEN 2: INCIDENTS (Original) -->
                <section id="incidents-screen" class="screen">
                    <div class="section-header">
                        <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
                            <h2 class="section-title" data-i18n="incidents-title" style="margin:0;">Incidents & Response Center</h2>
                            <span class="live-indicator">
                                <span class="live-dot"></span>
                                <span style="font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;">LIVE</span>
                            </span>
                        </div>
                        <p class="section-subtitle" data-i18n="incidents-subtitle">From deepfakes to review storms â€“ all in one control room</p>
                        <div class="last-update">Activity feed: <span id="incidents-activity-count" style="color:var(--success);font-weight:700;">248 events</span> in last hour</div>
                    </div>

                    <div class="card">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th data-i18n="table-incident">Incident</th>
                                    <th data-i18n="table-severity">Severity</th>
                                    <th data-i18n="table-status">Status</th>
                                    <th data-i18n="table-channels">Channels</th>
                                    <th data-i18n="table-time">First Seen</th>
                                </tr>
                            </thead>
                            <tbody id="incidents-table-body">
                                <!-- Will be populated by JS -->
                            </tbody>
                        </table>
                    </div>

                    <div id="incident-detail" class="card" style="display: none;">
                        <div class="card-header">
                            <h3 class="card-title" id="incident-detail-title"></h3>
                        </div>
                        <div id="incident-detail-content"></div>
                        <button class="btn btn-primary" onclick="handleRunResponse(this)">
                            <i class="fas fa-magic"></i>
                            <span data-i18n="btn-run-response">Run Suggested Response</span>
                        </button>
                    </div>
                </section>

                <!-- SCREEN 3: INFLUENCERS -->
                <section id="influencers-screen" class="screen">
                    <div class="section-header">
                        <div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;">
                            <h2 class="section-title" id="influencers-title" data-i18n="influencers-title" style="margin:0;">Influencers & Audience â€“ Netflix</h2>
                            <span class="live-indicator">
                                <span class="live-dot"></span>
                                <span style="font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:1px;">LIVE</span>
                            </span>
                        </div>
                        <p class="section-subtitle" data-i18n="influencers-subtitle">Who is driving the conversation</p>
                        <div class="last-update">Tracking: <span style="color:var(--primary-color);font-weight:700;">6 key influencers</span> Â· <span id="live-mentions" style="color:var(--success);font-weight:700;">8,432 mentions</span> today</div>
                    </div>

                    <!-- Influencer KPIs -->
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: rgba(139, 92, 246, 0.1); color: var(--accent-purple);">
                                <i class="fas fa-user-friends"></i>
                            </div>
                            <div class="kpi-label" data-i18n="inf-reach">Top Influencer Reach</div>
                            <div class="kpi-value" style="font-size: 32px;">2.3M</div>
                            <span style="font-size: 12px; color: var(--text-secondary);">@EcoJustice_fr</span>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: rgba(239, 68, 68, 0.1); color: var(--danger);">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="kpi-label" data-i18n="inf-bots">Suspicious Network Share</div>
                            <div class="kpi-value" style="font-size: 32px;">28%</div>
                            <span class="chip danger">Likely bots</span>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: rgba(6, 182, 212, 0.1); color: var(--accent-cyan);">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div class="kpi-label" data-i18n="inf-geo">Key Geo</div>
                            <div class="kpi-value" style="font-size: 24px;">ÃŽle-de-France</div>
                            <span style="font-size: 12px; color: var(--text-secondary);">Lyon, Marseille</span>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--success);">
                                <i class="fas fa-language"></i>
                            </div>
                            <div class="kpi-label" data-i18n="inf-languages">Languages</div>
                            <div class="kpi-value" style="font-size: 24px;">FR 82%</div>
                            <span style="font-size: 12px; color: var(--text-secondary);">EN 14%, Other 4%</span>
                        </div>
                    </div>

                    <!-- Top Influencers -->
                    <div class="card mb-lg">
                        <div class="card-header">
                            <h3 class="card-title" data-i18n="inf-top-title">Top Influencers</h3>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th data-i18n="inf-handle">Handle</th>
                                    <th data-i18n="inf-followers">Followers</th>
                                    <th data-i18n="inf-stance">Stance</th>
                                    <th data-i18n="inf-impact">Impact Score</th>
                                    <th data-i18n="inf-action">Action</th>
                                </tr>
                            </thead>
                            <tbody id="influencers-table">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Communities -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" data-i18n="inf-communities">Audience Communities & Clusters</h3>
                        </div>
                        <div class="kpi-grid" id="communities-grid">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- SCREEN 4: REPORTS -->
                <section id="reports-screen" class="screen">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="reports-title">Reports & Exports</h2>
                        <p class="section-subtitle" data-i18n="reports-subtitle">Pre-generated insights and analytics</p>
                    </div>

                    <div class="report-card">
                        <div class="report-card-header">
                            <div>
                                <div class="report-card-title" data-i18n="report-weekly">Weekly Brand Health â€“ France</div>
                                <div class="report-card-meta">Dec 28, 2024 - Jan 4, 2025</div>
                            </div>
                            <span class="chip success">Ready</span>
                        </div>
                        <p class="report-card-description" data-i18n="report-weekly-desc">
                            Comprehensive analysis of sentiment, volume, and risk trends across all monitored channels.
                        </p>
                        <button class="btn btn-secondary" onclick="handleViewReport(this, 'weekly')">
                            <i class="fas fa-eye"></i>
                            <span data-i18n="btn-view-summary">View Summary</span>
                        </button>
                    </div>

                    <div class="report-card">
                        <div class="report-card-header">
                            <div>
                                <div class="report-card-title" data-i18n="report-postmortem">Incident Post-Mortem â€“ Deepfake CEO Video</div>
                                <div class="report-card-meta">Jan 3, 2025</div>
                            </div>
                            <span class="chip warning">Draft</span>
                        </div>
                        <p class="report-card-description" data-i18n="report-postmortem-desc">
                            Detailed timeline, response analysis, and lessons learned from the deepfake incident on TikTok.
                        </p>
                        <button class="btn btn-secondary" onclick="handleViewReport(this, 'postmortem')">
                            <i class="fas fa-eye"></i>
                            <span data-i18n="btn-view-summary">View Summary</span>
                        </button>
                    </div>

                    <div class="report-card">
                        <div class="report-card-header">
                            <div>
                                <div class="report-card-title" data-i18n="report-influencer">Influencer Risk Report â€“ Q4 2024</div>
                                <div class="report-card-meta">Q4 2024</div>
                            </div>
                            <span class="chip info">Archived</span>
                        </div>
                        <p class="report-card-description" data-i18n="report-influencer-desc">
                            Analysis of key influencers, their sentiment towards Netflix, and potential partnership risks.
                        </p>
                        <button class="btn btn-secondary" onclick="handleViewReport(this, 'influencer')">
                            <i class="fas fa-eye"></i>
                            <span data-i18n="btn-view-summary">View Summary</span>
                        </button>
                    </div>
                </section>

                <!-- SCREEN 5: SETTINGS -->
                <section id="settings-screen" class="screen">
                    <div class="section-header">
                        <h2 class="section-title" data-i18n="settings-title">Settings</h2>
                        <p class="section-subtitle" data-i18n="settings-subtitle">Configure your monitoring preferences</p>
                    </div>

                    <!-- Brand Profile -->
                    <div class="card mb-lg">
                        <div class="card-header">
                            <h3 class="card-title" data-i18n="settings-profile">Brand Profile</h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-brand-name">Brand Name</label>
                            <input type="text" class="form-input" value="Netflix" disabled>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-industry">Industry</label>
                            <input type="text" class="form-input" value="Streaming Entertainment" disabled>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-headquarters">Headquarters</label>
                            <input type="text" class="form-input" value="Los Gatos, California" disabled>
                        </div>
                    </div>

                    <!-- Alert Preferences -->
                    <div class="card mb-lg">
                        <div class="card-header">
                            <h3 class="card-title" data-i18n="settings-alerts">Alert & Notification Preferences</h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-notify-severity">Notify me about:</label>
                            <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
                                <label style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span data-i18n="settings-high-severity">High severity incidents</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span data-i18n="settings-medium-severity">Medium severity incidents</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                    <label class="toggle-switch">
                                        <input type="checkbox">
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span data-i18n="settings-low-severity">Low severity incidents</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-min-volume">Minimum volume to trigger alert</label>
                            <select class="form-select">
                                <option>100 mentions</option>
                                <option selected>500 mentions</option>
                                <option>1,000 mentions</option>
                                <option>5,000 mentions</option>
                            </select>
                        </div>
                    </div>

                    <!-- Language & Region -->
                    <div class="card mb-lg">
                        <div class="card-header">
                            <h3 class="card-title" data-i18n="settings-lang-region">Language & Region</h3>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-language">Preferred Language</label>
                            <select class="form-select" id="settings-language-select" onchange="setLanguage(this.value)">
                                <option value="en" selected>English</option>
                                <option value="fr">FranÃ§ais</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-timezone">Time Zone</label>
                            <select class="form-select">
                                <option selected>Europe/Paris (GMT+1)</option>
                                <option>Europe/London (GMT+0)</option>
                                <option>America/New_York (GMT-5)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="settings-country">Country</label>
                            <input type="text" class="form-input" value="France" disabled>
                        </div>
                    </div>

                    <!-- Integrations -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" data-i18n="settings-integrations">Integrations</h3>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(30, 41, 59, 0.3); border-radius: var(--radius);">
                                <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                    <i class="fab fa-slack" style="font-size: 24px; color: #4A154B;"></i>
                                    <div>
                                        <div style="font-weight: 600;">Slack</div>
                                        <div style="font-size: 12px; color: var(--text-muted);">Receive alerts in Slack</div>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(30, 41, 59, 0.3); border-radius: var(--radius);">
                                <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                    <i class="fab fa-microsoft" style="font-size: 24px; color: #5558AF;"></i>
                                    <div>
                                        <div style="font-weight: 600;">Microsoft Teams</div>
                                        <div style="font-size: 12px; color: var(--text-muted);">Receive alerts in Teams</div>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(30, 41, 59, 0.3); border-radius: var(--radius);">
                                <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                    <i class="fas fa-envelope" style="font-size: 24px; color: var(--primary-color);"></i>
                                    <div>
                                        <div style="font-weight: 600;" data-i18n="settings-email">Email Alerts</div>
                                        <div style="font-size: 12px; color: var(--text-muted);" data-i18n="settings-email-desc">Receive email notifications</div>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Modal for Report View -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModal()">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">Report Summary</h2>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="modal-content">
                <!-- Content populated by JS -->
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // INITIALIZE AOS
        // ========================================
        AOS.init({
            duration: 600,
            once: true,
            offset: 50
        });

        // ========================================
        // GLOBAL STATE
        // ========================================
        let currentLanguage = 'en';
        let currentPage = 'overview';
        let selectedIncidentId = null;
        let currentTenant = 'netflix'; // Track current tenant

        // ========================================
        // TENANT CONFIGURATIONS
        // ========================================
        const tenants = {
            netflix: {
                id: 'netflix',
                name: 'Netflix',
                subtitle: 'Streaming Entertainment Â· Global',
                industry: 'Streaming Entertainment',
                iconBg: '#E50914',
                iconLetter: 'N',
                iconClass: 'netflix-n-icon',
                sentiment: 67,
                sentimentLabel: { en: 'Mostly Positive', fr: 'PlutÃ´t Positif' },
                sentimentIcon: 'fa-smile',
                sentimentColor: 'var(--success)',
                sentimentBg: 'rgba(16, 185, 129, 0.1)',
                sentimentChipClass: 'success',
                volume: '2.4M',
                volumeTrend: '+12.3%',
                volumeTrendUp: true,
                volumeIcon: 'fa-comments',
                riskLevel: { en: 'Vigilance Required', fr: 'Vigilance Requise' },
                riskValue: 'Moderate',
                riskColor: 'var(--warning)',
                riskBg: 'rgba(245, 158, 11, 0.1)',
                riskIcon: 'fa-exclamation-triangle',
                riskChipClass: 'warning',
                activeIncidents: 5,
                incidentsDetail: '2 high, 2 medium, 1 low severity',
                incidentsIcon: 'fa-fire',
                incidentsColor: 'var(--danger)'
            },
            israel: {
                id: 'israel',
                name: 'Israel',
                subtitle: 'Nation Brand Â· Middle East',
                industry: 'Government',
                iconBg: '#0038b8',
                iconLetter: 'âœ¡',
                iconClass: 'israel-icon',
                sentiment: 28,
                sentimentLabel: { en: 'Negative Trend', fr: 'Tendance NÃ©gative' },
                sentimentIcon: 'fa-frown',
                sentimentColor: 'var(--danger)',
                sentimentBg: 'rgba(239, 68, 68, 0.1)',
                sentimentChipClass: 'danger',
                volume: '8.7M',
                volumeTrend: '+312%',
                volumeTrendUp: true,
                volumeIcon: 'fa-volume-up',
                riskLevel: { en: 'Critical - International', fr: 'Critique - International' },
                riskValue: 'Critical',
                riskColor: 'var(--danger)',
                riskBg: 'rgba(239, 68, 68, 0.1)',
                riskIcon: 'fa-exclamation-triangle',
                riskChipClass: 'danger',
                activeIncidents: 6,
                incidentsDetail: '2 high, 3 medium, 1 low severity',
                incidentsIcon: 'fa-globe',
                incidentsColor: 'var(--danger)'
            }
        };

        // ========================================
        // TRANSLATIONS
        // ========================================
        const translations = {
            en: {
                'brand-console': 'Brand Console',
                'nav-overview': 'Overview',
                'nav-incidents': 'Incidents',
                'nav-influencers': 'Influencers',
                'nav-simulator': 'Simulator',
                'nav-reports': 'Reports',
                'nav-settings': 'Settings',
                'page-title-overview': 'Overview',
                'page-title-incidents': 'Incidents',
                'page-title-influencers': 'Influencers',
                'page-title-simulator': 'Simulator',
                'page-title-reports': 'Reports',
                'page-title-settings': 'Settings',
                'notifications-title': 'Notifications',
                'overview-title': 'Brand Overview â€“ Netflix',
                'overview-subtitle': 'Real-time risk and sentiment across channels',
                'kpi-sentiment': 'General Sentiment',
                'kpi-volume': 'Conversation Volume (24h)',
                'kpi-risk': 'Risk Level',
                'kpi-incidents': 'Active Incidents',
                'mostly-positive': 'Mostly Positive',
                'vigilance-required': 'Vigilance Required',
                'chart-sentiment-time': 'Sentiment Over Time',
                'chart-sentiment-subtitle': 'Last 7 days â€“ Multi-channel sentiment analysis',
                'chart-channels': 'Channel Breakdown',
                'chart-channels-subtitle': 'Share of conversation by platform',
                'chart-threats': 'Threat Distribution',
                'chart-threats-subtitle': 'Incident types breakdown',
                'chart-geo': 'Geographic Sentiment Distribution',
                'chart-geo-subtitle': 'Interactive map â€“ Click markers for details',
                'incidents-title': 'Incidents & Response Center',
                'incidents-subtitle': 'From deepfakes to review storms â€“ all in one control room',
                'table-incident': 'Incident',
                'table-severity': 'Severity',
                'table-status': 'Status',
                'table-channels': 'Channels',
                'table-time': 'First Seen',
                'btn-run-response': 'Run Suggested Response',
                'influencers-title': 'Influencers & Audience â€“ Netflix',
                'influencers-subtitle': 'Who is driving the conversation',
                'inf-reach': 'Top Influencer Reach',
                'inf-bots': 'Suspicious Network Share',
                'inf-geo': 'Key Geo',
                'inf-languages': 'Languages',
                'inf-top-title': 'Top Influencers',
                'inf-handle': 'Handle',
                'inf-followers': 'Followers',
                'inf-stance': 'Stance',
                'inf-impact': 'Impact Score',
                'inf-action': 'Action',
                'inf-communities': 'Audience Communities & Clusters',
                'sim-title': 'Response Impact Simulator',
                'sim-subtitle': 'Predict the impact of different response strategies',
                'sim-select-scenario': 'Select Scenario',
                'sim-select-strategy': 'Select Response Strategy',
                'strat-monitor': 'Monitor only',
                'strat-monitor-desc': 'Passive observation, no public response',
                'strat-community': 'Community manager response',
                'strat-community-desc': 'Engage directly with concerned users',
                'strat-statement': 'Official brand statement',
                'strat-statement-desc': 'Public statement across all channels',
                'strat-ceo': 'CEO video apology + FAQ page',
                'strat-ceo-desc': 'Maximum visibility response',
                'btn-run-sim': 'Run Simulation',
                'sim-results': 'Projected Impact (Next 72h)',
                'sim-summary': 'Summary',
                'reports-title': 'Reports & Exports',
                'reports-subtitle': 'Pre-generated insights and analytics',
                'report-weekly': 'Weekly Brand Health â€“ France',
                'report-weekly-desc': 'Comprehensive analysis of sentiment, volume, and risk trends across all monitored channels.',
                'report-postmortem': 'Incident Post-Mortem â€“ Deepfake CEO Video',
                'report-postmortem-desc': 'Detailed timeline, response analysis, and lessons learned from the deepfake incident on TikTok.',
                'report-influencer': 'Influencer Risk Report â€“ Q4 2024',
                'report-influencer-desc': 'Analysis of key influencers, their sentiment towards Netflix, and potential partnership risks.',
                'btn-view-summary': 'View Summary',
                'settings-title': 'Settings',
                'settings-subtitle': 'Configure your monitoring preferences',
                'settings-profile': 'Brand Profile',
                'settings-brand-name': 'Brand Name',
                'settings-industry': 'Industry',
                'settings-headquarters': 'Headquarters',
                'settings-alerts': 'Alert & Notification Preferences',
                'settings-notify-severity': 'Notify me about:',
                'settings-high-severity': 'High severity incidents',
                'settings-medium-severity': 'Medium severity incidents',
                'settings-low-severity': 'Low severity incidents',
                'settings-min-volume': 'Minimum volume to trigger alert',
                'settings-lang-region': 'Language & Region',
                'settings-language': 'Preferred Language',
                'settings-timezone': 'Time Zone',
                'settings-country': 'Country',
                'settings-integrations': 'Integrations',
                'settings-email': 'Email Alerts',
                'settings-email-desc': 'Receive email notifications'
            },
            fr: {
                'brand-console': 'Console Marque',
                'nav-overview': 'Vue d\'ensemble',
                'nav-incidents': 'Incidents',
                'nav-influencers': 'Influenceurs',
                'nav-simulator': 'Simulateur',
                'nav-reports': 'Rapports',
                'nav-settings': 'ParamÃ¨tres',
                'page-title-overview': 'Vue d\'ensemble',
                'page-title-incidents': 'Incidents',
                'page-title-influencers': 'Influenceurs',
                'page-title-simulator': 'Simulateur',
                'page-title-reports': 'Rapports',
                'page-title-settings': 'ParamÃ¨tres',
                'notifications-title': 'Notifications',
                'overview-title': 'AperÃ§u de la Marque â€“ Netflix',
                'overview-subtitle': 'Risque et sentiment en temps rÃ©el sur tous les canaux',
                'kpi-sentiment': 'Sentiment GÃ©nÃ©ral',
                'kpi-volume': 'Volume de Conversation (24h)',
                'kpi-risk': 'Niveau de Risque',
                'kpi-incidents': 'Incidents Actifs',
                'mostly-positive': 'PlutÃ´t Positif',
                'vigilance-required': 'Vigilance Requise',
                'chart-sentiment-time': 'Sentiment au Fil du Temps',
                'chart-sentiment-subtitle': '7 derniers jours â€“ Analyse multi-canal',
                'chart-channels': 'RÃ©partition par Canal',
                'chart-channels-subtitle': 'Part de conversation par plateforme',
                'chart-threats': 'Distribution des Menaces',
                'chart-threats-subtitle': 'Types d\'incidents',
                'chart-geo': 'Distribution GÃ©ographique du Sentiment',
                'chart-geo-subtitle': 'Carte interactive â€“ Cliquez sur les marqueurs',
                'incidents-title': 'Centre de Gestion des Incidents',
                'incidents-subtitle': 'Des deepfakes aux tempÃªtes d\'avis â€“ tout en un seul endroit',
                'table-incident': 'Incident',
                'table-severity': 'GravitÃ©',
                'table-status': 'Statut',
                'table-channels': 'Canaux',
                'table-time': 'DÃ©tectÃ©',
                'btn-run-response': 'Lancer la RÃ©ponse SuggÃ©rÃ©e',
                'influencers-title': 'Influenceurs & Audience â€“ Netflix',
                'influencers-subtitle': 'Qui mÃ¨ne la conversation',
                'inf-reach': 'PortÃ©e du Top Influenceur',
                'inf-bots': 'Part de RÃ©seau Suspect',
                'inf-geo': 'GÃ©ographie ClÃ©',
                'inf-languages': 'Langues',
                'inf-top-title': 'Top Influenceurs',
                'inf-handle': 'Pseudo',
                'inf-followers': 'AbonnÃ©s',
                'inf-stance': 'Position',
                'inf-impact': 'Score d\'Impact',
                'inf-action': 'Action',
                'inf-communities': 'CommunautÃ©s d\'Audience & Groupes',
                'sim-title': 'Simulateur d\'Impact de RÃ©ponse',
                'sim-subtitle': 'PrÃ©disez l\'impact de diffÃ©rentes stratÃ©gies de rÃ©ponse',
                'sim-select-scenario': 'SÃ©lectionner un ScÃ©nario',
                'sim-select-strategy': 'SÃ©lectionner une StratÃ©gie de RÃ©ponse',
                'strat-monitor': 'Surveillance uniquement',
                'strat-monitor-desc': 'Observation passive, pas de rÃ©ponse publique',
                'strat-community': 'RÃ©ponse du community manager',
                'strat-community-desc': 'Engager directement avec les utilisateurs concernÃ©s',
                'strat-statement': 'CommuniquÃ© officiel de la marque',
                'strat-statement-desc': 'DÃ©claration publique sur tous les canaux',
                'strat-ceo': 'VidÃ©o d\'excuses du PDG + page FAQ',
                'strat-ceo-desc': 'RÃ©ponse Ã  visibilitÃ© maximale',
                'btn-run-sim': 'Lancer la Simulation',
                'sim-results': 'Impact ProjetÃ© (72h)',
                'sim-summary': 'RÃ©sumÃ©',
                'reports-title': 'Rapports & Exports',
                'reports-subtitle': 'Analyses et insights prÃ©gÃ©nÃ©rÃ©s',
                'report-weekly': 'SantÃ© Hebdomadaire de la Marque â€“ France',
                'report-weekly-desc': 'Analyse complÃ¨te du sentiment, volume et tendances de risque sur tous les canaux surveillÃ©s.',
                'report-postmortem': 'Post-Mortem d\'Incident â€“ VidÃ©o Deepfake du PDG',
                'report-postmortem-desc': 'Chronologie dÃ©taillÃ©e, analyse de rÃ©ponse et leÃ§ons tirÃ©es de l\'incident deepfake sur TikTok.',
                'report-influencer': 'Rapport de Risque Influenceurs â€“ Q4 2024',
                'report-influencer-desc': 'Analyse des influenceurs clÃ©s, leur sentiment envers Netflix et risques potentiels de partenariat.',
                'btn-view-summary': 'Voir le RÃ©sumÃ©',
                'settings-title': 'ParamÃ¨tres',
                'settings-subtitle': 'Configurez vos prÃ©fÃ©rences de surveillance',
                'settings-profile': 'Profil de la Marque',
                'settings-brand-name': 'Nom de la Marque',
                'settings-industry': 'Industrie',
                'settings-headquarters': 'SiÃ¨ge Social',
                'settings-alerts': 'PrÃ©fÃ©rences d\'Alertes et Notifications',
                'settings-notify-severity': 'Me notifier pour:',
                'settings-high-severity': 'Incidents de gravitÃ© Ã©levÃ©e',
                'settings-medium-severity': 'Incidents de gravitÃ© moyenne',
                'settings-low-severity': 'Incidents de gravitÃ© faible',
                'settings-min-volume': 'Volume minimum pour dÃ©clencher une alerte',
                'settings-lang-region': 'Langue & RÃ©gion',
                'settings-language': 'Langue PrÃ©fÃ©rÃ©e',
                'settings-timezone': 'Fuseau Horaire',
                'settings-country': 'Pays',
                'settings-integrations': 'IntÃ©grations',
                'settings-email': 'Alertes Email',
                'settings-email-desc': 'Recevoir des notifications par email'
            }
        };

        // ========================================
        // MOCK DATA
        // ========================================
        const notifications = [
            {
                id: 1,
                icon: 'ðŸ”´',
                content: 'Password sharing crackdown causing major backlash on Twitter & Reddit',
                severity: 'high',
                time: '8 minutes ago',
                timeLabel: { en: '8 minutes ago', fr: 'Il y a 8 minutes' },
                incidentId: 1
            },
            {
                id: 2,
                icon: 'ðŸ”´',
                content: '#CancelNetflix trending globally after price increase announcement',
                severity: 'high',
                time: '45 minutes ago',
                timeLabel: { en: '45 minutes ago', fr: 'Il y a 45 minutes' },
                incidentId: 2
            },
            {
                id: 3,
                icon: 'ðŸŸ ',
                content: 'Content removal controversy - "Friends" generating negative sentiment',
                severity: 'medium',
                time: '2 hours ago',
                timeLabel: { en: '2 hours ago', fr: 'Il y a 2 heures' },
                incidentId: 3
            },
            {
                id: 4,
                icon: 'ðŸŸ ',
                content: 'Account security breach rumors spreading on social media',
                severity: 'medium',
                time: '4 hours ago',
                timeLabel: { en: '4 hours ago', fr: 'Il y a 4 heures' },
                incidentId: 4
            },
            {
                id: 5,
                icon: 'ðŸŸ¢',
                content: 'Documentary accuracy issue resolved with clarification statement',
                severity: 'low',
                time: '1 day ago',
                timeLabel: { en: '1 day ago', fr: 'Il y a 1 jour' },
                incidentId: 5
            }
        ];

        // Tenant-specific incidents data
        const tenantIncidents = {
            netflix: [
                {
                    id: 1,
                    title: 'Password sharing crackdown backlash',
                    severity: 'high',
                    status: 'Mitigation in progress',
                    channels: ['Twitter', 'Reddit', 'TikTok'],
                    firstSeen: 'Today, 09:17',
                    description: 'Widespread negative sentiment on social media regarding new password sharing restrictions in Canada and US markets.'
                },
                {
                    id: 2,
                    title: 'Cancellation wave after price increase',
                    severity: 'high',
                    status: 'Investigating',
                    channels: ['Twitter', 'Facebook', 'Reddit'],
                    firstSeen: 'Today, 11:42',
                    description: '#CancelNetflix trending after announcement of subscription price increases across multiple tiers.'
                },
                {
                    id: 3,
                    title: 'Content removal controversy - "Friends"',
                    severity: 'medium',
                    status: 'Detected',
                    channels: ['Twitter', 'Instagram'],
                    firstSeen: 'Today, 14:20',
                    description: 'Users expressing frustration over popular show being removed from the platform, comparing negatively to competitors.'
                },
                {
                    id: 4,
                    title: 'Account security breach rumors',
                    severity: 'medium',
                    status: 'Mitigation in progress',
                    channels: ['Twitter', 'Reddit'],
                    firstSeen: 'Yesterday, 18:05',
                    description: 'Unverified claims of account hacks circulating on social media, causing user concern about data security.'
                },
                {
                    id: 5,
                    title: 'Documentary accuracy questioned',
                    severity: 'low',
                    status: 'Resolved',
                    channels: ['Twitter', 'News Media'],
                    firstSeen: '2 days ago',
                    description: 'Fact-checkers disputed claims made in recent documentary release; Netflix issued clarification statement.'
                }
            ],
            israel: [
                {
                    id: 1,
                    title: 'UN voting bloc criticism affecting trade relations',
                    severity: 'high',
                    status: 'Diplomatic Response',
                    channels: ['News Media', 'Twitter', 'LinkedIn', 'Diplomatic'],
                    firstSeen: 'Today, 08:15',
                    description: 'Recent UN General Assembly votes creating diplomatic tension with key trade partners. European economic delegations expressing concern.'
                },
                {
                    id: 2,
                    title: 'Tech sector brain drain - talent moving to US',
                    severity: 'high',
                    status: 'Economic Monitoring',
                    channels: ['LinkedIn', 'Tech Blogs', 'News Media'],
                    firstSeen: 'Today, 11:30',
                    description: 'Major tech talent exodus to Silicon Valley and European hubs. 40% increase in senior engineers relocating, impacting startup nation brand.'
                },
                {
                    id: 3,
                    title: 'Tourism perception gap - security concerns vs reality',
                    severity: 'medium',
                    status: 'Brand Campaign Needed',
                    channels: ['Twitter', 'Travel Forums', 'Instagram'],
                    firstSeen: 'Yesterday, 14:20',
                    description: 'Tourism numbers down 18% despite actual security improvements. International perception not matching on-ground reality.'
                },
                {
                    id: 4,
                    title: 'BDS movement gaining corporate traction',
                    severity: 'medium',
                    status: 'Economic Defense',
                    channels: ['Twitter', 'News Media', 'Corporate'],
                    firstSeen: 'Yesterday, 09:00',
                    description: 'Several European retail chains reviewing supplier relationships. Economic impact estimated at $200M annually if trend continues.'
                },
                {
                    id: 5,
                    title: 'Eurovision hosting cost criticism domestically',
                    severity: 'low',
                    status: 'Internal Communications',
                    channels: ['Local News', 'Twitter', 'Domestic'],
                    firstSeen: '2 days ago',
                    description: 'Domestic critics questioning $25M spend on international event hosting during economic pressures. Budget allocation debate.'
                },
                {
                    id: 6,
                    title: 'Startup ecosystem valuation concerns',
                    severity: 'medium',
                    status: 'Investor Relations',
                    channels: ['Financial Press', 'Bloomberg', 'LinkedIn'],
                    firstSeen: '3 days ago',
                    description: 'International investors expressing concern over startup valuations. "Startup Nation" brand questioned after several high-profile failures.'
                }
            ],
            techcorp: [
                {
                    id: 1,
                    title: 'Massive data breach - 15M user records exposed',
                    severity: 'high',
                    status: 'Crisis Mode',
                    channels: ['Twitter', 'Reddit', 'News Media', 'LinkedIn'],
                    firstSeen: 'Today, 06:45',
                    description: 'Critical security incident: internal database compromised, exposing customer emails, passwords, and payment information. Trending #1 globally.'
                },
                {
                    id: 2,
                    title: 'AI training data privacy violations',
                    severity: 'high',
                    status: 'Legal Investigation',
                    channels: ['Twitter', 'Reddit', 'Hacker News'],
                    firstSeen: 'Today, 10:12',
                    description: 'Whistleblower claims company used customer data without consent to train AI models. Class-action lawsuit filed in 3 states.'
                },
                {
                    id: 3,
                    title: 'CEO insider trading allegations',
                    severity: 'high',
                    status: 'Investigating',
                    channels: ['Twitter', 'News Media', 'Financial Press'],
                    firstSeen: 'Yesterday, 15:30',
                    description: 'CEO sold $50M in stock two days before data breach announcement. SEC investigation rumored, stock down 28%.'
                },
                {
                    id: 4,
                    title: 'Service outage affecting 8M businesses',
                    severity: 'high',
                    status: 'Ongoing',
                    channels: ['Twitter', 'Reddit', 'LinkedIn'],
                    firstSeen: 'Today, 08:00',
                    description: 'Cloud platform down for 6+ hours causing massive business disruption. Customers threatening to switch to competitors.'
                },
                {
                    id: 5,
                    title: 'Employee protest over unethical AI contracts',
                    severity: 'medium',
                    status: 'Escalating',
                    channels: ['Twitter', 'LinkedIn', 'News Media'],
                    firstSeen: 'Yesterday, 12:00',
                    description: '500+ employees walked out protesting contracts with surveillance companies. Viral video of protest has 12M views.'
                },
                {
                    id: 6,
                    title: 'False advertising - AI capabilities overstated',
                    severity: 'medium',
                    status: 'Detected',
                    channels: ['Twitter', 'Reddit', 'Tech Blogs'],
                    firstSeen: 'Yesterday, 09:15',
                    description: 'Customers report AI product significantly underperforms advertised capabilities. FTC complaint filed by consumer group.'
                },
                {
                    id: 7,
                    title: 'Toxic workplace culture exposÃ© published',
                    severity: 'medium',
                    status: 'Mitigation in progress',
                    channels: ['Twitter', 'LinkedIn', 'News Media'],
                    firstSeen: '2 days ago',
                    description: 'Major publication releases investigation revealing pattern of discrimination and harassment. 50+ former employees on record.'
                },
                {
                    id: 8,
                    title: 'Environmental greenwashing accusations',
                    severity: 'low',
                    status: 'Detected',
                    channels: ['Twitter', 'Reddit'],
                    firstSeen: '3 days ago',
                    description: 'Environmental groups claim "carbon neutral" claims are misleading. Data center emissions significantly higher than reported.'
                }
            ]
        };

        // Default to current tenant's incidents
        let incidents = tenantIncidents[currentTenant];

        // Tenant-specific influencers
        const tenantInfluencers = {
            netflix: [
            {
                id: 1,
                handle: '@TechCritic',
                followers: '2.3M',
                stance: 'Critical',
                impact: 94,
                stanceClass: 'danger',
                name: 'Marcus Chen',
                platform: 'Twitter/X',
                recentPosts: 4892,
                engagement: '8.4%',
                topics: ['Streaming Wars', 'Tech Industry', 'Consumer Rights'],
                bio: 'Technology journalist covering streaming platforms and digital media. Critical analyst of subscription models and pricing strategies.'
            },
            {
                id: 2,
                handle: '@StreamingGuru',
                followers: '1.8M',
                stance: 'Neutral',
                impact: 87,
                stanceClass: 'warning',
                name: 'Sarah Williams',
                platform: 'YouTube',
                recentPosts: 3241,
                engagement: '6.2%',
                topics: ['Streaming Reviews', 'Content Analysis', 'Industry Trends'],
                bio: 'Content creator focusing on streaming platform comparisons and recommendations. Balanced perspective on industry changes.'
            },
            {
                id: 3,
                handle: '@NetflixFanClub',
                followers: '890K',
                stance: 'Supportive',
                impact: 91,
                stanceClass: 'success',
                name: 'Netflix Fans United',
                platform: 'Instagram',
                recentPosts: 8742,
                engagement: '12.1%',
                topics: ['Netflix Original', 'New Releases', 'Fan Community'],
                bio: 'Official Netflix fan community account. Daily updates on new content, behind-the-scenes, and exclusive announcements.'
            },
            {
                id: 4,
                handle: '@MediaWatchdog',
                followers: '1.5M',
                stance: 'Critical',
                impact: 85,
                stanceClass: 'danger',
                name: 'Media Accountability Network',
                platform: 'Twitter/X',
                recentPosts: 5621,
                engagement: '5.8%',
                topics: ['Media Ethics', 'Corporate Accountability', 'Consumer Protection'],
                bio: 'Independent watchdog monitoring media companies and streaming services. Advocating for consumer rights and transparency.'
            },
            {
                id: 5,
                handle: '@BingeWatcher',
                followers: '650K',
                stance: 'Supportive',
                impact: 73,
                stanceClass: 'success',
                name: 'Emma Rodriguez',
                platform: 'TikTok',
                recentPosts: 2847,
                engagement: '15.3%',
                topics: ['Binge Reviews', 'Hidden Gems', 'Watch Lists'],
                bio: 'Professional binge-watcher and content reviewer. Passionate about discovering and sharing the best Netflix shows.'
            },
            {
                id: 6,
                handle: '@StreamingDeals',
                followers: '1.2M',
                stance: 'Neutral',
                impact: 79,
                stanceClass: 'warning',
                name: 'Streaming Deals Hub',
                platform: 'Twitter/X',
                recentPosts: 6284,
                engagement: '4.2%',
                topics: ['Price Tracking', 'Subscription Deals', 'Platform Comparisons'],
                bio: 'Tracking and comparing streaming subscription prices across all platforms. Helping consumers find the best value.'
            }
            ],
            israel: [
                {
                    id: 1,
                    handle: '@MiddleEastWatch',
                    followers: '3.2M',
                    stance: 'Critical',
                    impact: 96,
                    stanceClass: 'danger',
                    name: 'Middle East Monitor',
                    platform: 'Twitter/X',
                    recentPosts: 12453,
                    engagement: '11.2%',
                    topics: ['Middle East Politics', 'Human Rights', 'International Relations'],
                    bio: 'Independent news organization covering Middle East affairs with focus on political accountability and international law.'
                },
                {
                    id: 2,
                    handle: '@GlobalDiplomat',
                    followers: '2.8M',
                    stance: 'Critical',
                    impact: 89,
                    stanceClass: 'danger',
                    name: 'Dr. Sarah Al-Mansouri',
                    platform: 'Twitter/X',
                    recentPosts: 8742,
                    engagement: '9.4%',
                    topics: ['UN Affairs', 'International Law', 'Diplomatic Relations'],
                    bio: 'Former UN diplomat and international relations professor. Analyzing global diplomatic trends and voting patterns.'
                },
                {
                    id: 3,
                    handle: '@TechTelAviv',
                    followers: '1.5M',
                    stance: 'Supportive',
                    impact: 82,
                    stanceClass: 'success',
                    name: 'Tel Aviv Tech Hub',
                    platform: 'LinkedIn',
                    recentPosts: 5621,
                    engagement: '7.8%',
                    topics: ['Israeli Innovation', 'Startup Ecosystem', 'Tech Investment'],
                    bio: 'Promoting Israeli technology innovation and startup ecosystem. Highlighting success stories from the "Startup Nation".'
                },
                {
                    id: 4,
                    handle: '@BDSMovement',
                    followers: '890K',
                    stance: 'Critical',
                    impact: 91,
                    stanceClass: 'danger',
                    name: 'BDS Global Network',
                    platform: 'Instagram',
                    recentPosts: 9384,
                    engagement: '15.7%',
                    topics: ['Boycott Campaigns', 'Economic Pressure', 'Solidarity Actions'],
                    bio: 'Global BDS movement coordination. Organizing boycotts, divestment campaigns, and economic sanctions advocacy.'
                },
                {
                    id: 5,
                    handle: '@IsraelTourism',
                    followers: '1.2M',
                    stance: 'Supportive',
                    impact: 74,
                    stanceClass: 'success',
                    name: 'Discover Israel',
                    platform: 'Instagram',
                    recentPosts: 7234,
                    engagement: '10.3%',
                    topics: ['Travel', 'Cultural Heritage', 'Tourism Promotion'],
                    bio: 'Official tourism promotion account. Showcasing historical sites, cultural experiences, and travel opportunities.'
                },
                {
                    id: 6,
                    handle: '@AcademicBoycott',
                    followers: '650K',
                    stance: 'Critical',
                    impact: 78,
                    stanceClass: 'danger',
                    name: 'Academic Freedom Coalition',
                    platform: 'Twitter/X',
                    recentPosts: 4892,
                    engagement: '6.9%',
                    topics: ['Academic Boycott', 'University Campaigns', 'Research Ethics'],
                    bio: 'Coalition of academics advocating for boycott of Israeli academic institutions. Organizing campus campaigns and petition drives.'
                }
            ]
        };

        // Default to current tenant's influencers
        let influencers = tenantInfluencers[currentTenant];

        // Tenant-specific communities
        const tenantCommunities = {
            netflix: {
                reddit: {
                    name: 'r/Netflix Subreddit',
                    icon: 'fas fa-users',
                    color: '#ef4444',
                    members: '8.4M',
                    sentiment: '28% Positive',
                    activity: 'Very High',
                    description: 'The largest Netflix community on Reddit. Currently showing high activity around pricing changes and password sharing policies.',
                    keyTopics: ['Price Increases', 'Password Sharing', 'Content Recommendations', 'Technical Issues'],
                    sentiment_breakdown: { positive: 28, neutral: 15, negative: 57 },
                    recent_activity: 'Major spike in negative discussions following recent price increase announcement. Active moderation required.',
                    recommendation: 'Deploy community manager to address concerns transparently. Consider AMA with product team to rebuild trust.'
                },
                kdrama: {
                    name: 'K-Drama Fans',
                    icon: 'fas fa-heart',
                    color: '#10b981',
                    members: '12.3M',
                    sentiment: '89% Positive',
                    activity: 'High',
                    description: 'Highly engaged community passionate about Korean dramas and Netflix\'s K-content investments.',
                    keyTopics: ['New K-Drama Releases', 'Korean Content', 'Subtitles Quality', 'Regional Availability'],
                    sentiment_breakdown: { positive: 89, neutral: 8, negative: 3 },
                    recent_activity: 'Consistently positive engagement. Strong anticipation for upcoming K-drama releases.',
                    recommendation: 'Leverage as brand ambassadors. Provide early access to K-content news and exclusive behind-the-scenes content.'
                },
                truecrime: {
                    name: 'True Crime Community',
                    icon: 'fas fa-mask',
                    color: '#8b5cf6',
                    members: '6.8M',
                    sentiment: '81% Positive',
                    activity: 'Medium-High',
                    description: 'Dedicated fans of true crime documentaries and series. Highly engaged with Netflix originals in this genre.',
                    keyTopics: ['Documentary Quality', 'New Cases', 'Series Renewals', 'Accuracy Concerns'],
                    sentiment_breakdown: { positive: 81, neutral: 12, negative: 7 },
                    recent_activity: 'Strong positive buzz around recent documentary releases. Minor concerns about factual accuracy on some series.',
                    recommendation: 'Maintain high content quality standards. Consider fact-checking partnerships to address accuracy concerns proactively.'
                },
                anime: {
                    name: 'Anime Watchers',
                    icon: 'fas fa-dragon',
                    color: '#06b6d4',
                    members: '9.2M',
                    sentiment: '72% Positive',
                    activity: 'High',
                    description: 'Growing community of anime enthusiasts. Focused on both licensed content and Netflix originals.',
                    keyTopics: ['Anime Catalog', 'Simulcast Releases', 'Dub Quality', 'Licensing Agreements'],
                    sentiment_breakdown: { positive: 72, neutral: 18, negative: 10 },
                    recent_activity: 'Mixed sentiment on catalog depth compared to competitors. Positive reception of Netflix originals.',
                    recommendation: 'Expand anime catalog and improve release timing. Engage community for content preference feedback.'
                },
                family: {
                    name: 'Family Subscribers',
                    icon: 'fas fa-child',
                    color: '#f59e0b',
                    members: '18.5M',
                    sentiment: '54% Positive',
                    activity: 'Medium',
                    description: 'Parents and families using Netflix for kids and family content. Primary concern is value for money.',
                    keyTopics: ['Kids Content', 'Parental Controls', 'Family Plans', 'Price Sensitivity'],
                    sentiment_breakdown: { positive: 54, neutral: 22, negative: 24 },
                    recent_activity: 'Increased concerns about pricing and password sharing affecting family sharing arrangements.',
                    recommendation: 'Emphasize kids content value. Consider family-specific retention offers and improved parental control features.'
                }
            },
            israel: {
                diaspora: {
                    name: 'Jewish Diaspora Communities',
                    icon: 'fas fa-globe',
                    color: '#3b82f6',
                    members: '24.8M',
                    sentiment: '42% Positive',
                    activity: 'Very High',
                    description: 'Global Jewish communities with varying perspectives on Israeli policies. Active discussion on social media and community platforms.',
                    keyTopics: ['Government Policies', 'Two-State Solution', 'Human Rights', 'Identity & Pride'],
                    sentiment_breakdown: { positive: 42, neutral: 18, negative: 40 },
                    recent_activity: 'Increasingly polarized discussions. Younger diaspora showing more critical stance on policies.',
                    recommendation: 'Engage with progressive diaspora leaders. Emphasize shared values and democratic principles. Create listening sessions.'
                },
                academic: {
                    name: 'Academic & Research Networks',
                    icon: 'fas fa-university',
                    color: '#ef4444',
                    members: '3.2M',
                    activity: 'High',
                    sentiment: '31% Positive',
                    description: 'International academic community including universities, research institutions, and scholarly associations.',
                    keyTopics: ['Academic Boycott', 'Research Ethics', 'Academic Freedom', 'University Partnerships'],
                    sentiment_breakdown: { positive: 31, neutral: 22, negative: 47 },
                    recent_activity: 'Growing support for academic boycott campaigns. Multiple university associations passing BDS resolutions.',
                    recommendation: 'Highlight collaborative research achievements. Partner with international universities on humanitarian projects.'
                },
                business: {
                    name: 'International Business Community',
                    icon: 'fas fa-briefcase',
                    color: '#10b981',
                    members: '8.6M',
                    sentiment: '68% Positive',
                    activity: 'Medium-High',
                    description: 'Tech companies, investors, and business leaders engaged with Israeli startup ecosystem and innovation.',
                    keyTopics: ['Tech Innovation', 'Startup Investments', 'Trade Relations', 'ESG Concerns'],
                    sentiment_breakdown: { positive: 68, neutral: 19, negative: 13 },
                    recent_activity: 'Strong interest in Israeli tech sector. Some ESG concerns from institutional investors regarding regional operations.',
                    recommendation: 'Emphasize innovation success stories. Address ESG concerns proactively with transparency reports.'
                },
                tourism: {
                    name: 'Travel & Tourism Communities',
                    icon: 'fas fa-plane',
                    color: '#f59e0b',
                    members: '14.2M',
                    sentiment: '38% Positive',
                    activity: 'Medium',
                    description: 'Travel bloggers, tourism forums, and potential visitors discussing Israel as a destination.',
                    keyTopics: ['Safety Concerns', 'Historical Sites', 'Cultural Experience', 'Political Climate'],
                    sentiment_breakdown: { positive: 38, neutral: 28, negative: 34 },
                    recent_activity: 'Safety concerns dominating discussions. Positive reviews of cultural and historical attractions from those who visited.',
                    recommendation: 'Launch safety-focused PR campaign. Partner with travel influencers. Showcase diverse cultural experiences.'
                },
                ngos: {
                    name: 'NGO & Advocacy Networks',
                    icon: 'fas fa-hands-helping',
                    color: '#dc2626',
                    members: '6.4M',
                    sentiment: '19% Positive',
                    activity: 'Very High',
                    description: 'Human rights organizations, advocacy groups, and international NGOs monitoring regional policies.',
                    keyTopics: ['Human Rights', 'International Law', 'Humanitarian Aid', 'Advocacy Campaigns'],
                    sentiment_breakdown: { positive: 19, neutral: 11, negative: 70 },
                    recent_activity: 'High-volume critical reports and campaigns. Multiple UN resolutions and international pressure.',
                    recommendation: 'Engage with moderate human rights organizations. Commission independent human rights assessments. Increase transparency.'
                }
            }
        };

        // Default to current tenant's communities
        let communities = tenantCommunities[currentTenant];

        // ========================================
        // LANGUAGE SWITCHING
        // ========================================
        // Language data with flags
        const languages = {
            en: { code: 'EN', flag: 'ðŸ‡ºðŸ‡¸', name: 'English' },
            fr: { code: 'FR', flag: 'ðŸ‡«ðŸ‡·', name: 'FranÃ§ais' }
        };

        function setLanguage(lang) {
            currentLanguage = lang;

            // Update current language display
            const langData = languages[lang];
            document.getElementById('current-language-flag').textContent = langData.flag;
            document.getElementById('current-language-code').textContent = langData.code;

            // Update dropdown items active state
            document.querySelectorAll('.language-dropdown-item').forEach(item => {
                item.classList.toggle('active', item.getAttribute('data-lang') === lang);
            });

            // Update settings dropdown
            const settingsSelect = document.getElementById('settings-language-select');
            if (settingsSelect) {
                settingsSelect.value = lang;
            }

            // Update all i18n elements
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });

            // Update notification times
            renderNotifications();
        }

        function toggleLanguageDropdown() {
            const toggle = document.getElementById('language-toggle');
            toggle.classList.toggle('open');
        }

        function selectLanguage(lang) {
            setLanguage(lang);
            // Close dropdown after selection
            document.getElementById('language-toggle').classList.remove('open');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const toggle = document.getElementById('language-toggle');
            if (toggle && !toggle.contains(event.target)) {
                toggle.classList.remove('open');
            }
        });

        // ========================================
        // NAVIGATION
        // ========================================
        function navigateTo(page) {
            currentPage = page;

            // Scroll to top of page
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Update sidebar active state
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.toggle('active', item.getAttribute('data-page') === page);
            });

            // Update screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(page + '-screen').classList.add('active');

            // Update page title using data-i18n
            const pageTitleKey = 'page-title-' + page;
            const pageTitle = document.getElementById('page-title');
            pageTitle.setAttribute('data-i18n', pageTitleKey);
            pageTitle.textContent = translations[currentLanguage][pageTitleKey];

            // Close mobile sidebar if open
            document.getElementById('sidebar').classList.remove('mobile-open');

            // Render page-specific content
            if (page === 'overview' && !window.chartsRendered) {
                setTimeout(() => {
                    renderOverviewCharts();
                }, 100);
            } else if (page === 'incidents' && !window.incidentsRendered) {
                renderIncidents();
            } else if (page === 'influencers' && !window.influencersRendered) {
                renderInfluencers();
            }
        }

        function toggleMobileSidebar() {
            document.getElementById('sidebar').classList.toggle('mobile-open');
        }

        // ========================================
        // NOTIFICATIONS
        // ========================================
        function toggleNotifications() {
            document.getElementById('notification-panel').classList.toggle('active');
        }

        function renderNotifications() {
            const list = document.getElementById('notification-list');
            list.innerHTML = notifications.map(notif => `
                <div class="notification-item ${notif.severity}" onclick="viewNotificationIncident(${notif.incidentId})">
                    <div class="notification-content">
                        ${notif.icon} ${notif.content}
                    </div>
                    <div class="notification-meta">
                        <span>${notif.timeLabel[currentLanguage]}</span>
                        ${notif.incidentId ? '<span class="notification-action">' + (currentLanguage === 'en' ? 'View incident â†’' : 'Voir l\'incident â†’') + '</span>' : ''}
                    </div>
                </div>
            `).join('');
        }

        function viewNotificationIncident(incidentId) {
            if (incidentId) {
                toggleNotifications();
                navigateTo('incidents');
                setTimeout(() => {
                    handleIncidentClick(incidentId);
                }, 300);
            }
        }

        // ========================================
        // TENANT SWITCHING
        // ========================================
        function toggleTenantSwitcher() {
            const switcher = document.getElementById('tenant-switcher');
            const notificationPanel = document.getElementById('notification-panel');

            // Close notification panel if open
            if (notificationPanel.classList.contains('active')) {
                notificationPanel.classList.remove('active');
            }

            // Toggle switcher
            if (switcher.style.display === 'none' || !switcher.style.display) {
                switcher.style.display = 'flex';
            } else {
                switcher.style.display = 'none';
            }
        }

        function switchTenant(tenantId) {
            if (tenantId === currentTenant) {
                toggleTenantSwitcher();
                return;
            }

            currentTenant = tenantId;
            const tenant = tenants[tenantId];

            // Update brand info in header
            document.getElementById('brand-name').textContent = tenant.name;
            document.getElementById('brand-subtitle').textContent = tenant.subtitle;

            const brandIcon = document.getElementById('brand-icon');
            brandIcon.textContent = tenant.iconLetter;
            brandIcon.className = tenant.iconClass;

            // Only apply inline styles for non-Israel tenants (Israel uses CSS-based flag)
            if (tenant.id !== 'israel') {
                brandIcon.style.background = tenant.iconBg;
                brandIcon.style.boxShadow = `0 0 20px ${tenant.iconBg}66`;
            } else {
                // Remove inline styles to let CSS class take over
                brandIcon.style.background = '';
                brandIcon.style.boxShadow = '';
            }

            // Update incidents
            incidents = tenantIncidents[tenantId];

            // Update influencers
            influencers = tenantInfluencers[tenantId];

            // Update communities
            communities = tenantCommunities[tenantId];

            // Close switcher
            toggleTenantSwitcher();

            // Re-render incidents (works regardless of current page)
            renderIncidents();

            // Re-render influencers and communities if on influencers page
            if (currentPage === 'influencers') {
                window.influencersRendered = false;
                renderInfluencers();
            } else {
                // If not on influencers page, just re-render communities for next visit
                renderCommunities();
            }

            // Clear incident detail if one is selected
            const incidentDetail = document.getElementById('incident-detail');
            if (incidentDetail) {
                incidentDetail.style.display = 'none';
                incidentDetail.innerHTML = '';
            }

            // Update page titles
            const overviewTitle = document.getElementById('overview-title');
            if (overviewTitle) {
                overviewTitle.textContent = `Brand Overview â€“ ${tenant.name}`;
            }

            const influencersTitle = document.getElementById('influencers-title');
            if (influencersTitle) {
                influencersTitle.textContent = `Influencers & Audience â€“ ${tenant.name}`;
            }

            // Update KPIs (if on overview page)
            updateTenantKPIs();

            // Update charts if they exist (only if charts are already initialized)
            if (window.chartsRendered && sentimentChart) {
                updateTenantCharts();
            }

            // Show notification
            showTenantSwitchNotification(tenant.name);
        }

        function updateTenantKPIs() {
            const tenant = tenants[currentTenant];

            // Update sentiment
            const sentimentValue = document.getElementById('live-sentiment');
            if (sentimentValue) {
                const currentVal = parseInt(sentimentValue.textContent);
                sentimentValue.innerHTML = `${tenant.sentiment}<span style="font-size: 20px; color: var(--text-secondary);">/100</span>`;
            }

            // Update sentiment icon
            const sentimentIcon = document.getElementById('sentiment-icon');
            if (sentimentIcon) {
                sentimentIcon.style.background = tenant.sentimentBg;
                sentimentIcon.style.color = tenant.sentimentColor;
                sentimentIcon.querySelector('i').className = `fas ${tenant.sentimentIcon}`;
            }

            // Update sentiment chip
            const sentimentChip = document.getElementById('sentiment-chip');
            if (sentimentChip) {
                sentimentChip.className = `chip ${tenant.sentimentChipClass}`;
                const label = sentimentChip.querySelector('[data-i18n="mostly-positive"]');
                if (label) {
                    label.textContent = tenant.sentimentLabel[currentLanguage];
                }
            }

            // Update volume
            const volumeValue = document.getElementById('live-volume');
            if (volumeValue) {
                volumeValue.textContent = tenant.volume;
            }

            // Update volume icon
            const volumeIcon = document.getElementById('volume-icon');
            if (volumeIcon) {
                volumeIcon.querySelector('i').className = `fas ${tenant.volumeIcon}`;
            }

            // Update volume trend
            const volumeTrend = document.getElementById('volume-trend');
            const volumeTrendText = document.getElementById('live-volume-trend');
            if (volumeTrend && volumeTrendText) {
                volumeTrend.className = tenant.volumeTrendUp ? 'trend up' : 'trend down';
                volumeTrendText.textContent = tenant.volumeTrend;
                const trendIcon = volumeTrend.querySelector('i');
                if (trendIcon) {
                    trendIcon.className = tenant.volumeTrendUp ? 'fas fa-arrow-up' : 'fas fa-arrow-down';
                }
            }

            // Update risk level value
            const riskValueEl = document.getElementById('risk-value');
            if (riskValueEl) {
                riskValueEl.textContent = tenant.riskValue;
                riskValueEl.style.color = tenant.riskColor;
            }

            // Update risk icon
            const riskIcon = document.getElementById('risk-icon');
            if (riskIcon) {
                riskIcon.style.background = tenant.riskBg;
                riskIcon.style.color = tenant.riskColor;
                riskIcon.querySelector('i').className = `fas ${tenant.riskIcon}`;
            }

            // Update risk chip
            const riskChip = document.getElementById('risk-chip');
            if (riskChip) {
                riskChip.className = `chip ${tenant.riskChipClass}`;
                const label = riskChip.querySelector('[data-i18n="vigilance-required"]');
                if (label) {
                    label.textContent = tenant.riskLevel[currentLanguage];
                }
            }

            // Update active incidents
            const incidentsValue = document.getElementById('live-incidents');
            if (incidentsValue) {
                incidentsValue.textContent = tenant.activeIncidents;
            }

            // Update incidents detail
            const incidentsDetail = document.getElementById('live-incidents-detail');
            if (incidentsDetail) {
                incidentsDetail.textContent = tenant.incidentsDetail;
            }

            // Update incidents icon
            const incidentsIcon = document.getElementById('incidents-icon');
            if (incidentsIcon) {
                incidentsIcon.querySelector('i').className = `fas ${tenant.incidentsIcon}`;
                incidentsIcon.style.color = tenant.incidentsColor;
            }

            // Update incidents pulse
            const incidentsPulse = document.getElementById('incidents-pulse');
            if (incidentsPulse) {
                incidentsPulse.style.background = tenant.incidentsColor;
            }
        }

        function updateTenantCharts() {
            // Destroy and recreate charts with new tenant data
            if (sentimentChart) {
                sentimentChart.destroy();
                initSentimentChart();
            }
            if (channelChart) {
                channelChart.destroy();
                initChannelChart();
            }
            if (threatChart) {
                threatChart.destroy();
                initThreatChart();
            }

            // Update map with new tenant data
            if (globalMap) {
                renderMap();
            }
        }

        function animateValue(element, start, end, duration) {
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;

            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    element.textContent = end;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current);
                }
            }, 16);
        }

        function showTenantSwitchNotification(tenantName) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 90px;
                right: 32px;
                background: var(--bg-card);
                border: 1px solid var(--primary-color);
                border-radius: var(--radius);
                padding: 16px 24px;
                z-index: 10000;
                box-shadow: var(--shadow-xl);
                animation: slideDown 0.3s ease;
            `;
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-check-circle" style="color: var(--success); font-size: 20px;"></i>
                    <div>
                        <div style="font-weight: 600; margin-bottom: 4px;">Switched to ${tenantName}</div>
                        <div style="font-size: 12px; color: var(--text-muted);">Dashboard updated with ${tenantName} data</div>
                    </div>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                notification.style.transition = 'all 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Close tenant switcher when clicking outside
        document.addEventListener('click', function(event) {
            const switcher = document.getElementById('tenant-switcher');
            const brandInfo = document.getElementById('brand-info');

            if (switcher && brandInfo &&
                !switcher.contains(event.target) &&
                !brandInfo.contains(event.target) &&
                switcher.style.display === 'flex') {
                switcher.style.display = 'none';
            }
        });

        // ========================================
        // OVERVIEW CHARTS
        // ========================================
        let sentimentChart, channelChart, threatChart, simulationChart;

        function getChartDataForTenant() {
            if (currentTenant === 'israel') {
                return {
                    sentiment: {
                        positive: [32, 30, 28, 26, 25, 24, 22],
                        neutral: [28, 27, 26, 25, 25, 24, 24],
                        negative: [40, 43, 46, 49, 50, 52, 54]
                    },
                    channels: {
                        labels: ['News Media', 'X/Twitter', 'UN/Diplomatic', 'Academic', 'NGOs'],
                        data: [38, 32, 18, 8, 4]
                    },
                    threats: {
                        labels: ['Int\'l Relations', 'Legal/ICC', 'BDS/Economic', 'Academic Boycott', 'Tourism'],
                        data: [42, 25, 18, 10, 5]
                    }
                };
            } else if (currentTenant === 'techcorp') {
                return {
                    sentiment: {
                        positive: [32, 28, 25, 22, 20, 18, 16],
                        neutral: [25, 27, 28, 30, 28, 27, 26],
                        negative: [43, 45, 47, 48, 52, 55, 58]
                    },
                    channels: {
                        labels: ['X', 'Reddit', 'News Media', 'LinkedIn', 'Hacker News'],
                        data: [42, 28, 18, 8, 4]
                    },
                    threats: {
                        labels: ['Data Breach', 'Legal', 'Outages', 'Reputation', 'Employee'],
                        data: [35, 25, 20, 12, 8]
                    }
                };
            } else {
                return {
                    sentiment: {
                        positive: [65, 68, 70, 72, 71, 74, 73],
                        neutral: [25, 23, 22, 20, 21, 19, 20],
                        negative: [10, 9, 8, 8, 8, 7, 7]
                    },
                    channels: {
                        labels: ['X', 'Instagram', 'TikTok', 'News', 'Reviews'],
                        data: [35, 25, 20, 12, 8]
                    },
                    threats: {
                        labels: ['Price/Policy', 'Content', 'Competition', 'Tech Issues', 'Other'],
                        data: [35, 30, 15, 12, 8]
                    }
                };
            }
        }

        function initSentimentChart() {
            const sentimentCtx = document.getElementById('sentiment-chart');
            if (!sentimentCtx) return;

            const data = getChartDataForTenant();
            sentimentChart = new Chart(sentimentCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [
                        {
                            label: 'Positive',
                            data: data.sentiment.positive,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Neutral',
                            data: data.sentiment.neutral,
                            borderColor: '#6b7280',
                            backgroundColor: 'rgba(107, 114, 128, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Negative',
                            data: data.sentiment.negative,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'top' },
                            tooltip: {
                                backgroundColor: 'rgba(30, 41, 59, 0.95)',
                                padding: 12
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: { callback: value => value + '%' }
                            }
                        }
                    }
                });
        }

        function initChannelChart() {
            const channelCtx = document.getElementById('channel-chart');
            if (!channelCtx) return;

            const chartData = getChartDataForTenant();
            channelChart = new Chart(channelCtx, {
                type: 'bar',
                data: {
                    labels: chartData.channels.labels,
                    datasets: [{
                        label: 'Share',
                        data: chartData.channels.data,
                        backgroundColor: ['rgba(59, 130, 246, 0.8)', 'rgba(139, 92, 246, 0.8)', 'rgba(6, 182, 212, 0.8)', 'rgba(245, 158, 11, 0.8)', 'rgba(16, 185, 129, 0.8)'],
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, max: 50, ticks: { callback: value => value + '%' } }
                    }
                }
            });
        }

        function initThreatChart() {
            const threatCtx = document.getElementById('threat-chart');
            if (!threatCtx) return;

            const chartData = getChartDataForTenant();
            threatChart = new Chart(threatCtx, {
                type: 'doughnut',
                data: {
                    labels: chartData.threats.labels,
                    datasets: [{
                        data: chartData.threats.data,
                        backgroundColor: ['rgba(239, 68, 68, 0.8)', 'rgba(245, 158, 11, 0.8)', 'rgba(139, 92, 246, 0.8)', 'rgba(236, 72, 153, 0.8)', 'rgba(6, 182, 212, 0.8)']
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'right' } }
                }
            });
        }

        function renderOverviewCharts() {
            if (window.chartsRendered) return;
            window.chartsRendered = true;

            Chart.defaults.color = '#94a3b8';
            Chart.defaults.borderColor = 'rgba(148, 163, 184, 0.1)';
            Chart.defaults.font.family = 'Inter';

            initSentimentChart();
            initChannelChart();
            initThreatChart();

            // Map
            renderMap();
        }

        let globalMap = null;
        let mapMarkers = [];

        function getMapDataForTenant() {
            if (currentTenant === 'israel') {
                return [
                    { country: 'United States', sentiment: 35, volume: '1.2M', lat: 37.0, lng: -95.7, radius: 24 },
                    { country: 'United Kingdom', sentiment: 22, volume: '380K', lat: 55.4, lng: -3.4, radius: 18 },
                    { country: 'France', sentiment: 18, volume: '420K', lat: 46.2, lng: 2.2, radius: 19 },
                    { country: 'Germany', sentiment: 25, volume: '310K', lat: 51.2, lng: 10.5, radius: 17 },
                    { country: 'Canada', sentiment: 38, volume: '180K', lat: 56.1, lng: -106.3, radius: 15 },
                    { country: 'Australia', sentiment: 32, volume: '95K', lat: -25.3, lng: 133.8, radius: 13 },
                    { country: 'Spain', sentiment: 20, volume: '125K', lat: 40.5, lng: -3.7, radius: 13 },
                    { country: 'Italy', sentiment: 24, volume: '98K', lat: 41.9, lng: 12.6, radius: 12 },
                    { country: 'Turkey', sentiment: 12, volume: '580K', lat: 38.9, lng: 35.2, radius: 20 },
                    { country: 'Egypt', sentiment: 8, volume: '420K', lat: 26.8, lng: 30.8, radius: 19 },
                    { country: 'Jordan', sentiment: 15, volume: '85K', lat: 30.6, lng: 36.2, radius: 11 },
                    { country: 'UAE', sentiment: 55, volume: '125K', lat: 23.4, lng: 53.8, radius: 13 },
                    { country: 'South Africa', sentiment: 16, volume: '145K', lat: -30.6, lng: 22.9, radius: 14 },
                    { country: 'India', sentiment: 42, volume: '890K', lat: 20.6, lng: 78.9, radius: 22 },
                    { country: 'Russia', sentiment: 28, volume: '210K', lat: 61.5, lng: 105.3, radius: 16 }
                ];
            } else {
                // Netflix data
                return [
                    { country: 'United States', sentiment: 62, volume: '58.4K', lat: 37.0, lng: -95.7, radius: 22 },
                    { country: 'Brazil', sentiment: 78, volume: '24.1K', lat: -14.2, lng: -51.9, radius: 18 },
                    { country: 'United Kingdom', sentiment: 65, volume: '12.8K', lat: 55.4, lng: -3.4, radius: 15 },
                    { country: 'Mexico', sentiment: 74, volume: '18.5K', lat: 23.6, lng: -102.5, radius: 16 },
                    { country: 'France', sentiment: 69, volume: '11.2K', lat: 46.2, lng: 2.2, radius: 14 },
                    { country: 'Germany', sentiment: 71, volume: '9.8K', lat: 51.2, lng: 10.5, radius: 14 },
                    { country: 'India', sentiment: 82, volume: '42.7K', lat: 20.6, lng: 78.9, radius: 20 },
                    { country: 'Japan', sentiment: 77, volume: '15.3K', lat: 36.2, lng: 138.3, radius: 15 },
                    { country: 'South Korea', sentiment: 85, volume: '19.8K', lat: 35.9, lng: 127.8, radius: 16 },
                    { country: 'Canada', sentiment: 58, volume: '8.4K', lat: 56.1, lng: -106.3, radius: 13 },
                    { country: 'Australia', sentiment: 67, volume: '6.9K', lat: -25.3, lng: 133.8, radius: 13 },
                    { country: 'Spain', sentiment: 73, volume: '8.1K', lat: 40.5, lng: -3.7, radius: 13 },
                    { country: 'Italy', sentiment: 70, volume: '7.3K', lat: 41.9, lng: 12.6, radius: 12 },
                    { country: 'Turkey', sentiment: 68, volume: '11.5K', lat: 38.9, lng: 35.2, radius: 14 },
                    { country: 'Argentina', sentiment: 76, volume: '6.2K', lat: -38.4, lng: -63.6, radius: 12 }
                ];
            }
        }

        function renderMap() {
            const mapEl = document.getElementById('geo-map');
            if (!mapEl) return;

            // Initialize map only once
            if (!globalMap) {
                globalMap = L.map('geo-map', { center: [20, 10], zoom: 2 });
                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: 'Â© OpenStreetMap'
                }).addTo(globalMap);
            }

            // Clear existing markers
            mapMarkers.forEach(marker => globalMap.removeLayer(marker));
            mapMarkers = [];

            // Add new markers based on current tenant
            const geoData = getMapDataForTenant();

            geoData.forEach(loc => {
                const color = loc.sentiment >= 75 ? '#10b981' : loc.sentiment >= 65 ? '#f59e0b' :
                             loc.sentiment >= 40 ? '#f59e0b' : '#ef4444';
                const marker = L.circleMarker([loc.lat, loc.lng], {
                    radius: loc.radius,
                    fillColor: color,
                    color: '#fff',
                    weight: 2,
                    fillOpacity: 0.7
                }).addTo(globalMap).bindPopup(`
                    <div style="padding:10px;min-width:150px;">
                        <strong style="font-size:14px;">${loc.country}</strong><br>
                        <div style="margin-top:8px;">
                            <span style="color:${color};font-size:32px;font-weight:bold;">${loc.sentiment}</span>
                            <span style="color:#94a3b8;font-size:12px;">/100</span>
                        </div>
                        <div style="color:#94a3b8;font-size:12px;margin-top:4px;">${loc.volume} mentions (24h)</div>
                    </div>
                `);
                mapMarkers.push(marker);
            });
        }

        // ========================================
        // INCIDENTS
        // ========================================
        function renderIncidents() {
            const tbody = document.getElementById('incidents-table-body');
            if (!tbody) return;

            tbody.innerHTML = incidents.map(inc => {
                const severityClass = inc.severity === 'high' ? 'danger' : inc.severity === 'medium' ? 'warning' : 'success';
                return `
                    <tr onclick="handleIncidentClick(${inc.id})" style="cursor:pointer;">
                        <td><strong>${inc.title}</strong></td>
                        <td><span class="chip ${severityClass}">${inc.severity}</span></td>
                        <td>${inc.status}</td>
                        <td>${inc.channels.join(', ')}</td>
                        <td>${inc.firstSeen}</td>
                    </tr>
                `;
            }).join('');
        }

        function handleIncidentClick(id) {
            // Add a small loading delay to simulate fetching data
            const detailEl = document.getElementById('incident-detail');
            detailEl.style.display = 'block';
            detailEl.innerHTML = `
                <div class="card-header">
                    <h3 class="card-title">Loading...</h3>
                </div>
                <div style="text-align:center;padding:60px;">
                    <i class="fas fa-spinner fa-spin" style="font-size:40px;color:var(--primary-color);"></i>
                    <p style="color:var(--text-secondary);margin-top:16px;">Analyzing incident...</p>
                </div>
            `;

            setTimeout(() => {
                viewIncidentDetail(id);
            }, 800);
        }

        function viewIncidentDetail(id) {
            selectedIncidentId = id;
            const incident = incidents.find(i => i.id === id);
            if (!incident) return;

            const detailEl = document.getElementById('incident-detail');
            detailEl.innerHTML = `
                <div class="card-header">
                    <h3 class="card-title" id="incident-detail-title">${incident.title}</h3>
                </div>
                <div id="incident-detail-content">
                    <p style="margin-bottom:16px;color:var(--text-secondary);line-height:1.7;">${incident.description}</p>
                    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px;">
                        <span class="chip ${incident.severity === 'high' ? 'danger' : incident.severity === 'medium' ? 'warning' : 'success'}">
                            <i class="fas fa-exclamation-circle"></i> ${incident.severity} severity
                        </span>
                        <span class="chip info">
                            <i class="fas fa-clock"></i> ${incident.status}
                        </span>
                        <span class="chip" style="background:rgba(59,130,246,0.1);color:var(--primary-color);">
                            <i class="fas fa-hashtag"></i> ${incident.channels.join(', ')}
                        </span>
                    </div>
                    <button class="btn btn-primary" onclick="handleViewResponses(this, ${id})" style="width:100%;">
                        <i class="fas fa-lightbulb"></i>
                        <span data-i18n="btn-view-responses">View AI-Suggested Response Strategies</span>
                    </button>
                    <div id="response-strategies-${id}" style="display:none;margin-top:32px;"></div>
                </div>
            `;
            detailEl.style.display = 'block';
        }

        function handleViewResponses(button, incidentId) {
            showButtonLoading(button, () => showResponseStrategies(incidentId), 1200);
        }

        function showResponseStrategies(incidentId) {
            const container = document.getElementById(`response-strategies-${incidentId}`);
            container.style.display = 'block';

            // Get tailored strategies for this specific incident
            const strategies = getStrategiesForIncident(incidentId);

            container.innerHTML = `
                <div style="border-top:2px solid var(--border-color);padding-top:32px;">
                    <h4 style="font-size:18px;font-weight:700;margin-bottom:24px;color:var(--text-primary);">
                        <i class="fas fa-robot" style="color:var(--primary-color);"></i>
                        ${currentLanguage === 'en' ? 'Recommended Response Strategies' : 'StratÃ©gies de RÃ©ponse RecommandÃ©es'}
                    </h4>
                    ${strategies.map((strategy, index) => `
                        <div class="strategy-card" style="background:var(--bg-card);border-radius:var(--radius);padding:24px;margin-bottom:24px;border:1px solid var(--border-color);">
                            <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
                                <div style="width:40px;height:40px;border-radius:50%;background:${strategy.color}20;display:flex;align-items:center;justify-content:center;">
                                    <i class="${strategy.icon}" style="color:${strategy.color};font-size:18px;"></i>
                                </div>
                                <div style="flex:1;">
                                    <h5 style="font-size:16px;font-weight:600;color:var(--text-primary);margin-bottom:4px;">${strategy.name}</h5>
                                    <div style="font-size:12px;color:var(--text-muted);">
                                        ${strategy.effectiveness}
                                    </div>
                                </div>
                                <span class="chip ${strategy.recommended ? 'success' : 'info'}" style="font-size:11px;">
                                    ${strategy.recommended ? (currentLanguage === 'en' ? 'â­ RECOMMENDED' : 'â­ RECOMMANDÃ‰') : (currentLanguage === 'en' ? 'ALTERNATIVE' : 'ALTERNATIF')}
                                </span>
                            </div>
                            <p style="color:var(--text-secondary);line-height:1.7;margin-bottom:16px;font-size:14px;">${strategy.description}</p>
                            <div style="background:rgba(0,0,0,0.3);border-radius:var(--radius);padding:16px;margin-bottom:16px;">
                                <div style="font-size:12px;font-weight:600;color:var(--text-muted);margin-bottom:12px;text-transform:uppercase;letter-spacing:1px;">
                                    ${currentLanguage === 'en' ? 'ðŸ“‹ Action Steps' : 'ðŸ“‹ Ã‰tapes d\'Action'}
                                </div>
                                <ul style="margin:0;padding-left:20px;color:var(--text-secondary);font-size:13px;line-height:1.8;">
                                    ${strategy.steps.map(step => `<li>${step}</li>`).join('')}
                                </ul>
                            </div>
                            <div style="height:250px;position:relative;">
                                <canvas id="strategy-chart-${incidentId}-${index}"></canvas>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;

            // Render charts for each strategy after a brief delay to ensure DOM is ready
            setTimeout(() => {
                strategies.forEach((strategy, index) => {
                    renderStrategyChart(incidentId, index, strategy);
                });
            }, 100);

            // Smooth scroll to strategies
            setTimeout(() => {
                container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 150);
        }

        function getStrategiesForIncident(incidentId) {
            const strategiesMap = {
                1: [ // Password sharing crackdown backlash
                    {
                        name: 'Empathy-First Communication Campaign',
                        icon: 'fas fa-heart',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· 72h recovery',
                        description: `<strong>What this is:</strong> A comprehensive communication strategy that prioritizes emotional connection and understanding before defending the policy change. This approach acknowledges customer pain points while reframing the narrative around value and fairness.
                        <br><br><strong>Why it works:</strong> Research shows that 73% of customers are more receptive to policy changes when they feel heard first. By leading with empathy rather than justification, you reduce defensive reactions and create space for rational discourse.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Immediate Response (0-4h):</strong> CEO or senior leader records authentic video message. Key elements: acknowledge frustration ("I've read your messages"), explain 'why now' (content costs increased 40%), emphasize mission (sustainable platform for next decade). Tone: humble, not defensive.</li>
                        <li><strong>Educational Content (4-12h):</strong> Publish detailed blog post with data visualization showing how password sharing economics work. Include comparison: "If 100M households share with 30M others, that's 30% less revenue for content you love." Make it relatable, not preachy.</li>
                        <li><strong>Value Reinforcement (12-48h):</strong> Launch multi-channel campaign showcasing exclusive features, upcoming releases, and quality investments. Use customer testimonials: "I was angry at first, but then I realized how much I actually use Netflix..."</li>
                        <li><strong>Transition Support (48-72h):</strong> Offer 30-day grace period for existing sharing arrangements. Provide easy tools to convert shared users to sub-accounts at discounted rate. Make transition feel generous, not forced.</li>
                        </ul>`,
                        steps: [
                            'CEO video addressing concerns within 4 hours',
                            'Publish blog post explaining policy rationale',
                            'Launch social media campaign highlighting subscriber-only features',
                            'Offer grace period for existing shared accounts'
                        ],
                        projectionData: [68, 65, 58, 52, 46, 42, 38, 34, 30, 28, 26, 25]
                    },
                    {
                        name: 'Value Enhancement Strategy',
                        icon: 'fas fa-gift',
                        color: '#8b5cf6',
                        recommended: false,
                        effectiveness: 'Medium Impact Â· 96h recovery',
                        description: 'Counter negative sentiment by announcing new features, content releases, and improved service quality.',
                        steps: [
                            'Announce exclusive new content releases',
                            'Introduce family plan improvements',
                            'Highlight upcoming major releases',
                            'Launch limited-time promotional offer'
                        ],
                        projectionData: [68, 66, 62, 58, 54, 50, 47, 44, 42, 40, 38, 36]
                    }
                ],
                2: [ // Cancellation wave after price increase
                    {
                        name: 'Value Justification + Retention Offer',
                        icon: 'fas fa-shield-alt',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· 48h recovery',
                        description: 'Aggressively communicate value while offering targeted retention incentives for at-risk subscribers.',
                        steps: [
                            'Launch "More Value Than Ever" campaign immediately',
                            'Send personalized retention offers to active cancellers',
                            'Highlight cost-per-hour compared to competitors',
                            'Announce major content drops for next quarter'
                        ],
                        projectionData: [72, 68, 60, 52, 44, 38, 32, 28, 26, 24, 23, 22]
                    },
                    {
                        name: 'Transparent Communication Strategy',
                        icon: 'fas fa-comments',
                        color: '#06b6d4',
                        recommended: false,
                        effectiveness: 'Medium Impact Â· 72h recovery',
                        description: 'Publicly address pricing concerns with transparency about costs and investments in content.',
                        steps: [
                            'Publish detailed explanation of pricing change',
                            'Host live Q&A with leadership',
                            'Share content investment statistics',
                            'Emphasize no ads commitment'
                        ],
                        projectionData: [72, 70, 66, 62, 58, 54, 50, 46, 43, 40, 38, 36]
                    }
                ],
                3: [ // Content removal controversy - "Friends"
                    {
                        name: 'Content Strategy Transparency',
                        icon: 'fas fa-film',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· 36h recovery',
                        description: 'Proactively communicate content strategy and highlight upcoming replacements and original content.',
                        steps: [
                            'Issue statement explaining licensing realities',
                            'Announce 3-5 exciting content acquisitions',
                            'Highlight similar content already available',
                            'Share sneak peek of upcoming originals'
                        ],
                        projectionData: [64, 60, 54, 48, 42, 38, 34, 32, 30, 29, 28, 28]
                    },
                    {
                        name: 'Community Engagement Initiative',
                        icon: 'fas fa-users',
                        color: '#f59e0b',
                        recommended: false,
                        effectiveness: 'Medium Impact Â· 60h recovery',
                        description: 'Engage directly with fans through social media and community managers to address concerns.',
                        steps: [
                            'Activate community management team',
                            'Run "What Would You Like To See?" campaign',
                            'Share behind-the-scenes content decisions',
                            'Create content recommendation engine highlight'
                        ],
                        projectionData: [64, 62, 58, 54, 50, 47, 44, 42, 40, 38, 37, 36]
                    }
                ],
                4: [ // Account security breach rumors
                    {
                        name: 'Immediate Security Assurance',
                        icon: 'fas fa-lock',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'Critical Â· 24h response',
                        description: 'Rapid response with security audit results and proactive security enhancements announcement.',
                        steps: [
                            'Issue security statement within 2 hours',
                            'Publish independent security audit results',
                            'Announce 2FA improvements',
                            'Offer free security check for all users',
                            'Direct link to password reset tools'
                        ],
                        projectionData: [66, 62, 54, 46, 38, 32, 28, 26, 24, 23, 22, 22]
                    },
                    {
                        name: 'Educational Security Campaign',
                        icon: 'fas fa-graduation-cap',
                        color: '#8b5cf6',
                        recommended: false,
                        effectiveness: 'Medium Impact Â· 48h recovery',
                        description: `<strong>What this is:</strong> Transform a crisis into an opportunity to educate users about cybersecurity while positioning your brand as a trusted security partner. This strategy turns defensive posture into proactive value-add.
                        <br><br><strong>Why it works:</strong> Educational campaigns achieve 2.4x higher engagement than defensive PR because they provide actionable value. Users appreciate brands that help them protect themselves rather than just defending company reputation.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Campaign Launch (0-6h):</strong> Create dedicated "Security Hub" landing page. Design it as educational resource, not corporate response. Include interactive password strength checker, 2FA setup wizard, and "Is your account secure?" quiz.</li>
                        <li><strong>Video Series (6-24h):</strong> Produce 5 short videos (60-90 seconds each) covering: recognizing phishing, creating strong passwords, 2FA basics, secure device practices, and what to do if compromised. Partner with cybersecurity influencer for credibility. Publish one every 4 hours.</li>
                        <li><strong>Personalized Outreach (12-36h):</strong> Send customized emails based on account security status. Example: "Your account has 2FA âœ“ but uses a common password âœ—". Include one-click security upgrade button. Make it helpful, not scary.</li>
                        <li><strong>Expert Credibility (24-48h):</strong> Host live webinar with recognized cybersecurity expert (not your internal team). Title: "Taking Control of Your Digital Security." Make it about user empowerment, mention your platform only in context. Record and distribute widely.</li>
                        <li><strong>Long-term Value (48h+):</strong> Launch quarterly "Security Awareness Week" program. Offer free account monitoring service. Create downloadable "Family Digital Security Guide". Build lasting trust through ongoing commitment.</li>
                        </ul>
                        <br><strong>Pro tip:</strong> Partner with schools and libraries to offer free digital security workshops. The community goodwill creates positive counter-narrative that overshadows the original security concerns.`,
                        steps: [
                            'Launch security awareness campaign',
                            'Create security tips video series',
                            'Send personalized security checkup emails',
                            'Partner with security experts for webinar'
                        ],
                        projectionData: [66, 64, 60, 56, 52, 48, 45, 42, 40, 38, 36, 35]
                    }
                ],
                5: [ // Documentary accuracy questioned
                    {
                        name: 'Fact-Check & Clarification',
                        icon: 'fas fa-check-circle',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· 24h resolution',
                        description: 'Quickly address inaccuracies with transparent fact-checking and expert consultation.',
                        steps: [
                            'Publish detailed fact-check article',
                            'Add context cards to documentary',
                            'Engage with fact-checkers publicly',
                            'Issue updated viewer guidance'
                        ],
                        projectionData: [58, 54, 48, 42, 36, 32, 28, 26, 25, 24, 24, 24]
                    },
                    {
                        name: 'Documentary Standards Update',
                        icon: 'fas fa-certificate',
                        color: '#06b6d4',
                        recommended: false,
                        effectiveness: 'Low Impact Â· Preventive',
                        description: 'Use incident to showcase commitment to documentary accuracy standards.',
                        steps: [
                            'Announce enhanced fact-checking process',
                            'Publish documentary guidelines',
                            'Highlight expert advisory board',
                            'Create "Netflix Documentary Standards" page'
                        ],
                        projectionData: [58, 57, 54, 52, 50, 48, 46, 44, 43, 42, 41, 40]
                    }
                ]
            };

            // TechCorp incident strategies
            const techcorpStrategies = {
                1: [ // Massive data breach
                    {
                        name: 'Crisis Transparency & Victim Support Protocol',
                        icon: 'fas fa-shield-alt',
                        color: '#ef4444',
                        recommended: true,
                        effectiveness: 'Critical Â· Immediate Action Required',
                        description: `<strong>What this is:</strong> A comprehensive crisis management approach that prioritizes affected users above corporate reputation. This protocol combines radical transparency, proactive victim support, and accountability demonstration to rebuild trust after a catastrophic security failure.
                        <br><br><strong>Why it works:</strong> Post-breach studies show that companies providing immediate, comprehensive support experience 68% faster trust recovery than those who minimize or delay. Victims become advocates when they feel truly protected.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Immediate Acknowledgment (0-2h):</strong> CEO issues personal video statement acknowledging breach severity. Script: "This is unacceptable. I take full responsibility. Here's what we know, what we're doing, and how we're helping you." NO corporate speak, NO minimizing. Raw honesty builds credibility.</li>
                        <li><strong>Victim Protection (2-4h):</strong> Launch dedicated breach response center (1-800 hotline, live chat, dedicated email). Offer FREE: 3 years identity theft protection, credit monitoring, legal support, and $1M identity theft insurance. Don't wait for lawsuits - lead with generosity.</li>
                        <li><strong>Forensic Transparency (4-12h):</strong> Publish detailed technical breakdown of attack vector, systems compromised, and data exposed. Hire independent security firm for audit. Commit to publishing full forensic report within 30 days. Transparency disarms conspiracy theories.</li>
                        <li><strong>Account Remediation (12-24h):</strong> Force password reset for ALL users (not just affected). Implement mandatory 2FA. Send personalized notification to each affected user detailing exactly what of THEIR data was exposed. No generic emails - personalized impact assessment.</li>
                        <li><strong>Systemic Overhaul (24-72h):</strong> Announce: (1) New CISO hire from top-tier security company, (2) $50M security infrastructure investment, (3) Bug bounty program with industry-leading payouts, (4) Quarterly third-party security audits with public results. Make it impossible to doubt commitment.</li>
                        <li><strong>Long-term Accountability (ongoing):</strong> Create public "Security Dashboard" showing real-time security metrics, resolved vulnerabilities, and compliance status. Monthly "Security Transparency Report." Make security posture visible and measurable.</li>
                        </ul>
                        <br><strong>Critical dos:</strong> Over-communicate, over-support, over-deliver. Underpromise on timelines, overdeliver on solutions.
                        <br><strong>Critical don'ts:</strong> Never say "small number of users," never blame users, never downplay significance.`,
                        steps: [
                            'CEO video: full accountability within 2 hours',
                            'Launch victim support program with free identity protection',
                            'Publish technical details of breach',
                            'Force password reset + mandatory 2FA for all users',
                            'Announce $50M security overhaul and new CISO',
                            'Create public security transparency dashboard'
                        ],
                        projectionData: [92, 88, 82, 74, 66, 58, 52, 46, 42, 38, 35, 32]
                    },
                    {
                        name: 'Regulatory Preemption & Compliance Showcase',
                        icon: 'fas fa-gavel',
                        color: '#8b5cf6',
                        recommended: false,
                        effectiveness: 'Medium Impact Â· Legal Focus',
                        description: `<strong>What this is:</strong> Proactively engage with regulators and demonstrate compliance leadership to shape the regulatory response. Convert crisis into catalyst for industry-wide security standards improvement.
                        <br><br><strong>Why it works:</strong> Regulators prefer cooperative targets over defensive ones. Companies that self-report and propose solutions receive 45% lighter penalties on average. Industry leadership repositions you from problem to solution.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Regulatory Engagement (0-6h):</strong> General Counsel directly contacts FTC, state AGs, and relevant data protection authorities BEFORE they contact you. Provide full briefing packet. Offer to cooperate fully. This builds goodwill and shows you're not hiding.</li>
                        <li><strong>Compliance Demonstration (6-24h):</strong> Publish detailed compliance report showing adherence to SOC 2, ISO 27001, GDPR, CCPA requirements. Highlight where you exceeded minimums. Acknowledge where breach revealed gaps. Honesty + competence = credibility.</li>
                        <li><strong>Industry Leadership (24-48h):</strong> Propose formation of "Cloud Security Coalition" with industry peers. Offer to share breach learnings (without competitive secrets) to improve industry-wide defenses. Position as: "We failed, but let's make sure this doesn't happen to others."</li>
                        <li><strong>Standards Development (48-96h):</strong> Work with NIST or equivalent to develop enhanced security standards. Volunteer as pilot program for stricter requirements. Public commitment: "We'll meet the highest standard, even if it's not required."</li>
                        </ul>`,
                        steps: [
                            'Proactively brief regulators before they investigate',
                            'Publish comprehensive compliance documentation',
                            'Propose industry-wide security coalition',
                            'Volunteer for pilot program of stricter standards'
                        ],
                        projectionData: [92, 90, 86, 82, 78, 74, 70, 66, 62, 58, 54, 50]
                    }
                ],
                2: [ // AI training data privacy violations
                    {
                        name: 'Ethical AI Overhaul & User Data Sovereignty',
                        icon: 'fas fa-brain',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· 96h recovery',
                        description: `<strong>What this is:</strong> Transform from defensive position to ethical AI leadership by implementing industry-leading data consent and control mechanisms. This strategy turns a violation into an opportunity to set new standards for ethical AI development.
                        <br><br><strong>Why it works:</strong> AI ethics scandals create trust vacuums. The first company to implement truly user-centric AI data governance captures the ethical high ground and 3x competitive advantage in customer trust scores.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Immediate Halt & Audit (0-12h):</strong> Publicly announce immediate suspension of ALL AI training using customer data. Hire external AI ethics firm (e.g., AI Now Institute) to conduct full audit. This sacrifice of short-term capability shows long-term commitment.</li>
                        <li><strong>Create Counter-Narrative (12-24h):</strong> Position as "AI built WITH users, not ON users." Announce new "Data Sovereignty Program" where users have granular control: opt-in (not opt-out), data usage transparency dashboard, ability to see exactly how your data trained models, one-click data deletion with confirmation it's removed from training sets.</li>
                        <li><strong>Compensate Affected Users (24-48h):</strong> Identify users whose data was misused. Offer: (1) Sincere apology + explanation, (2) 12 months free premium service, (3) $500 account credit, (4) Option to participate in new ethics advisory board. Make restitution meaningful.</li>
                        <li><strong>Launch Education Campaign (48-96h):</strong> Create "AI Literacy Hub" explaining: how AI training works, why data matters, what consent means, how to protect yourself. Position your company as educator, not just vendor. Partner with EFF or similar organization for credibility.</li>
                        <li><strong>Ethical AI Certification (ongoing):</strong> Work with academic institutions to create first-ever "Certified Ethical AI" standard. Volunteer as first company to undergo certification. Publish methodology for others. Lead the change you want to see.</li>
                        </ul>
                        <br><strong>Key message:</strong> "We broke your trust. We're not just fixing it - we're redefining what ethical AI means in our industry."`,
                        steps: [
                            'Suspend all AI training on customer data immediately',
                            'Launch user Data Sovereignty dashboard with granular controls',
                            'Compensate affected users with service credits + participation opportunity',
                            'Create AI Literacy education program',
                            'Pursue industry-first Ethical AI certification'
                        ],
                        projectionData: [86, 82, 76, 68, 60, 52, 44, 38, 34, 31, 29, 28]
                    }
                ],
                3: [ // CEO insider trading allegations
                    {
                        name: 'Independent Investigation + Leadership Accountability',
                        icon: 'fas fa-balance-scale',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· 72h critical window',
                        description: `<strong>What this is:</strong> Immediately establish independent investigation while demonstrating leadership accountability. This strategy separates the company from individual misconduct and shows commitment to ethical governance.
                        <br><br><strong>Why it works:</strong> Insider trading allegations destroy investor confidence. Companies that act decisively and transparently see 52% faster stock recovery than those who defend executives.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Immediate Action (0-4h):</strong> Board of Directors issues statement: "We take these allegations with utmost seriousness. We have initiated an independent investigation led by [prestigious law firm]. CEO has voluntarily agreed to [temporary leave/stock trading freeze]." Show you're not protecting anyone.</li>
                        <li><strong>Investigation Transparency (4-24h):</strong> Announce special committee of independent board members to oversee investigation. Commit to sharing findings publicly within 30 days. Set up dedicated investor hotline for concerns.</li>
                        <li><strong>Governance Reforms (24-48h):</strong> Announce immediate policy changes: executive trading blackout windows expanded, real-time public disclosure of all C-suite trades, third-party compliance monitoring. Make changes BEFORE investigation concludes to show proactive commitment.</li>
                        <li><strong>Investor Communication (48-72h):</strong> CEO (or COO if CEO on leave) hosts investor call. Focus on: business fundamentals remain strong, pipeline intact, governance improvements. Separate person from performance.</li>
                        </ul>`,
                        steps: [
                            'Board announces independent investigation within 4 hours',
                            'CEO agrees to temporary restrictions',
                            'Special committee formed with independent directors',
                            'Announce enhanced governance policies immediately',
                            'Host investor call focusing on business fundamentals'
                        ],
                        projectionData: [88, 84, 78, 70, 62, 54, 48, 42, 38, 36, 34, 32]
                    }
                ],
                4: [ // Service outage affecting 8M businesses
                    {
                        name: 'Customer-First Recovery + Compensation Protocol',
                        icon: 'fas fa-life-ring',
                        color: '#ef4444',
                        recommended: true,
                        effectiveness: 'Critical Â· Immediate Action',
                        description: `<strong>What this is:</strong> Prioritize customer impact mitigation over reputation management. Generous compensation combined with technical transparency turns angry customers into advocates.
                        <br><br><strong>Why it works:</strong> B2B customers care about: (1) getting back online, (2) preventing recurrence, (3) fair compensation. Companies that lead with generous compensation see 73% customer retention vs 31% for minimal compensation.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Crisis Mode (0-2h):</strong> Establish war room with hourly public updates. Create status page showing: affected regions, estimated recovery time, workarounds available. Transparency builds patience.</li>
                        <li><strong>Immediate Compensation (2-6h):</strong> Announce automatic compensation BEFORE customers ask: 30 days service credit for all affected customers + SLA credit multipliers. Make it automatic, not requiring claim submission. Generosity prevents churn.</li>
                        <li><strong>Technical Transparency (6-24h):</strong> Once resolved, publish detailed post-mortem: root cause, why failovers didn't work, specific fixes implemented. Engineers write it, not PR team. Technical customers respect honesty.</li>
                        <li><strong>Prevention Investment (24-48h):</strong> Announce $100M infrastructure investment, third-party resilience audit, new SLA guarantees with teeth (automatic refunds if breached). Make prevention credible with dollars.</li>
                        </ul>`,
                        steps: [
                            'Launch public status page with hourly updates',
                            'Announce automatic 30-day credit + SLA multipliers',
                            'Publish technical post-mortem within 24 hours',
                            'Commit $100M to infrastructure resilience',
                            'Establish enhanced SLA guarantees'
                        ],
                        projectionData: [94, 90, 84, 76, 66, 56, 48, 42, 38, 34, 32, 30]
                    }
                ],
                5: [ // Employee protest over unethical AI contracts
                    {
                        name: 'Stakeholder Dialogue + Ethics Policy Revision',
                        icon: 'fas fa-hands-helping',
                        color: '#8b5cf6',
                        recommended: true,
                        effectiveness: 'Medium Impact Â· 96h window',
                        description: `<strong>What this is:</strong> Engage employees as stakeholders in ethical decision-making. Create formal ethics review process that gives employees voice without undermining business decisions.
                        <br><br><strong>Why it works:</strong> Employee activism is driven by feeling powerless. Companies that create formal ethics processes see 89% reduction in public protests because employees have internal channel for concerns.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Acknowledge Concerns (0-12h):</strong> CEO sends company-wide message: "I've heard your concerns. We share your commitment to ethical technology. Let's have a real conversation." Invite protest leaders to private meeting within 48 hours. Public validation reduces temperature.</li>
                        <li><strong>Establish Ethics Board (12-48h):</strong> Create "Technology Ethics Review Board" with 50% employee representation (elected by staff, not appointed by management). Give board binding authority to red-flag contracts for ethical review. Real power, not theater.</li>
                        <li><strong>Contract Transparency (48-72h):</strong> Commit to publishing ethical review summaries for all major contracts. Explain: use case, safeguards, why we believe it's ethical. Let employees and public scrutinize. Transparency forces better decisions.</li>
                        <li><strong>Create Counter-Narrative (72-96h):</strong> Launch "Ethical AI Leadership Initiative" - partner with universities on AI ethics research, publish annual ethics report, create $10M fund for AI safety research. Transform from problem to solution.</li>
                        </ul>`,
                        steps: [
                            'CEO acknowledges concerns and invites dialogue',
                            'Create employee-led Ethics Review Board with real power',
                            'Commit to publishing contract ethics reviews',
                            'Launch Ethical AI Leadership Initiative with $10M commitment'
                        ],
                        projectionData: [82, 78, 72, 66, 60, 54, 48, 44, 40, 38, 36, 34]
                    }
                ],
                6: [ // False advertising - AI capabilities overstated
                    {
                        name: 'Honest Recalibration + Customer Choice',
                        icon: 'fas fa-adjust',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· 48h recovery',
                        description: `<strong>What this is:</strong> Admit overpromising, recalibrate messaging, and give customers choice to continue or get refunds. Radical honesty combined with customer empowerment rebuilds trust faster than defending exaggerated claims.
                        <br><br><strong>Why it works:</strong> Customers know when they're being gaslit. Companies that admit mistakes and empower customer choice see 4x higher satisfaction than those who defend indefensible claims.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Honest Admission (0-6h):</strong> CEO blog post: "We overpromised. Our marketing got ahead of our capabilities. Here's what our AI actually does vs. what we claimed." Side-by-side comparison table. No spin, just truth. Honesty is disarming.</li>
                        <li><strong>Customer Choice (6-12h):</strong> Email every customer with three options: (1) Full refund, no questions asked, (2) Continue with revised expectations at 30% discount, (3) Early access to improved version when ready. Let them choose. Choice = control = satisfaction.</li>
                        <li><strong>Product Roadmap (12-24h):</strong> Publish transparent roadmap showing: current capabilities, planned improvements, realistic timelines. Use actual technical metrics, not marketing fluff. Engineers write it, not marketers.</li>
                        <li><strong>Marketing Overhaul (24-48h):</strong> Announce new "Truth in AI Marketing" policy: all claims must be validated by engineering team, third-party benchmarks published, limitations clearly stated. Turn mistake into competitive advantage through honesty.</li>
                        </ul>`,
                        steps: [
                            'Publish honest comparison of claims vs. actual capabilities',
                            'Offer all customers choice: refund, discount, or early access',
                            'Release technical roadmap with realistic timelines',
                            'Implement "Truth in AI Marketing" validation policy'
                        ],
                        projectionData: [78, 72, 64, 56, 48, 42, 38, 34, 32, 30, 29, 28]
                    }
                ],
                7: [ // Toxic workplace culture exposÃ©
                    {
                        name: 'Cultural Transformation + Accountability Action Plan',
                        icon: 'fas fa-heart-broken',
                        color: '#ef4444',
                        recommended: true,
                        effectiveness: 'Medium Impact Â· Long-term effort',
                        description: `<strong>What this is:</strong> Acknowledge cultural failures, take immediate accountability actions, and commit to measurable transformation. This isn't PR - it's actual organizational change with public accountability.
                        <br><br><strong>Why it works:</strong> Culture exposÃ©s are credible because they have 50+ voices. Denial looks absurd. Companies that acknowledge and act see 68% reputation recovery vs. 12% for those who defend.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Immediate Accountability (0-24h):</strong> If allegations involve specific leaders, place them on administrative leave pending investigation. Bring in external HR firm to conduct independent investigation. Former employees included. No whitewashing.</li>
                        <li><strong>Public Acknowledgment (24-48h):</strong> CEO public statement: "These stories are heartbreaking and unacceptable. We failed people who trusted us. I'm personally accountable. Here's how we're changing." Empathy + ownership, no defensiveness.</li>
                        <li><strong>Transformation Roadmap (48-96h):</strong> Announce measurable changes: (1) Independent DEI officer reporting to board, (2) Anonymous reporting system run by third party, (3) Manager training mandatory, (4) Promotion criteria include culture scores, (5) Quarterly public diversity/inclusion metrics. Specific + measurable = credible.</li>
                        <li><strong>Victim Support (ongoing):</strong> Establish fund to support therapy for current and former employees affected by discrimination/harassment. Proactive outreach to those who left under difficult circumstances. Make amends where possible.</li>
                        </ul>`,
                        steps: [
                            'Place accused leaders on leave, launch independent investigation',
                            'CEO issues empathetic public acknowledgment',
                            'Announce measurable transformation roadmap with public metrics',
                            'Establish support fund for affected employees'
                        ],
                        projectionData: [84, 82, 78, 74, 68, 62, 56, 50, 46, 42, 40, 38]
                    }
                ],
                8: [ // Environmental greenwashing accusations
                    {
                        name: 'Transparency Audit + Science-Based Commitments',
                        icon: 'fas fa-leaf',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'Medium Impact Â· 72h response',
                        description: `<strong>What this is:</strong> Replace marketing claims with third-party verified data. Commit to science-based targets with independent monitoring. Turn greenwashing accusation into sustainability leadership.
                        <br><br><strong>Why it works:</strong> Greenwashing accusations stick because most "carbon neutral" claims use questionable offsets. Companies that switch to science-based, verified commitments regain credibility in 3-6 months.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Withdraw Questionable Claims (0-12h):</strong> Immediately remove "carbon neutral" language from website and materials. Statement: "We're reviewing our environmental claims to ensure accuracy. We're committed to transparency over marketing." Stop digging.</li>
                        <li><strong>Third-Party Audit (12-48h):</strong> Engage credible firm (e.g., CDP, Science Based Targets initiative) to conduct full carbon audit. Commit to publishing full results within 60 days, including Scope 1, 2, and 3 emissions. No cherry-picking.</li>
                        <li><strong>Science-Based Targets (48-72h):</strong> Announce commitment to Science Based Targets initiative (SBTi) - this requires 1.5Â°C alignment and independent validation. Real targets, not marketing targets. Include data center energy, supply chain, employee travel - everything.</li>
                        <li><strong>Public Dashboard (ongoing):</strong> Launch real-time sustainability dashboard showing: actual energy consumption, renewable percentage, emissions by source, offset quality ratings. Update monthly. Make it impossible to greenwash when data is public.</li>
                        </ul>`,
                        steps: [
                            'Remove all "carbon neutral" claims immediately',
                            'Engage third-party for full carbon audit',
                            'Commit to Science Based Targets initiative (SBTi)',
                            'Launch public sustainability dashboard with real-time data'
                        ],
                        projectionData: [72, 68, 64, 58, 52, 46, 42, 38, 36, 34, 32, 31]
                    }
                ]
            };

            // Israel incident strategies
            const israelStrategies = {
                1: [ // UN voting bloc criticism
                    {
                        name: 'Economic Diplomacy Offensive',
                        icon: 'fas fa-handshake',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· Strategic',
                        description: `<strong>What this is:</strong> Leverage economic partnerships and trade agreements to counterbalance diplomatic criticism. Focus on bilateral relationships and tangible mutual benefits.
                        <br><br><strong>Why it works:</strong> Economic interdependence creates incentives for constructive engagement. Countries with strong trade ties are 65% more likely to moderate critical positions.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Bilateral Engagement (0-48h):</strong> Foreign Ministry initiates direct economic dialogue with key European partners. Highlight mutual trade benefits ($50B+ annual bilateral trade). Present data on job creation and supply chain interdependence.</li>
                        <li><strong>Trade Delegation Tour (Week 1):</strong> Send senior economic ministers to major capitals. Focus on tech cooperation, innovation partnerships, cybersecurity collaboration. Sign new MOUs in renewable energy and water technology.</li>
                        <li><strong>Private Sector Bridge-Building (Week 2-4):</strong> Facilitate CEO-to-CEO dialogue. Israeli tech companies partner with European firms on AI, automotive tech, agri-tech. Create "Innovation Alliance" initiative showcasing collaborative projects.</li>
                        <li><strong>Long-term Economic Integration (Ongoing):</strong> Expand EU-Israel trade agreement scope. Join European research programs (Horizon Europe). Position as Mediterranean tech hub for European companies.</li>
                        </ul>`,
                        steps: [
                            'Foreign Ministry launches bilateral economic dialogue',
                            'Trade delegation visits key European capitals',
                            'Facilitate Israeli-European corporate partnerships',
                            'Expand EU-Israel trade agreement participation'
                        ],
                        projectionData: [72, 68, 62, 56, 50, 45, 42, 40, 38, 36, 35, 34]
                    }
                ],
                2: [ // Tech brain drain
                    {
                        name: 'Startup Nation 2.0 Initiative',
                        icon: 'fas fa-rocket',
                        color: '#8b5cf6',
                        recommended: true,
                        effectiveness: 'High Impact Â· 6-12 month timeline',
                        description: `<strong>What this is:</strong> Comprehensive ecosystem upgrade to retain talent and attract global tech workers. Transform from startup nation to scale-up nation.
                        <br><br><strong>Why it works:</strong> Brain drain is primarily economic/lifestyle driven. Countries that address quality of life + career growth retain 80% more senior talent.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Financial Incentives (Immediate):</strong> Launch $500M "Stay & Scale" fund for senior engineers staying with Israeli companies. Offer equity grants, housing assistance in Tel Aviv, tax benefits for returning expats. Make staying financially competitive with relocation.</li>
                        <li><strong>Quality of Life Improvements (0-6 months):</strong> Address cost of living concerns - expand affordable housing near tech hubs, improve public transportation in Tel Aviv/Herzliya. Create international schools consortium for expat families. Build European-standard infrastructure.</li>
                        <li><strong>Career Path Expansion (6-12 months):</strong> Attract Google, Microsoft, Meta to open major R&D centers (not just satellite offices). Partner with multinational corporations to create 10,000 senior roles. Let talent work for global brands while staying local.</li>
                        <li><strong>Global Reverse Recruitment (Ongoing):</strong> Launch "Tech Aliyah" program targeting worldwide Jewish tech talent. Offer relocation packages, fast-track visas for skilled non-Jewish workers. Brand Israel as "Silicon Valley of Middle East" with better work-life balance.</li>
                        </ul>`,
                        steps: [
                            'Launch $500M "Stay & Scale" retention fund',
                            'Address cost of living and infrastructure gaps',
                            'Attract multinational R&D center expansions',
                            'Launch global "Tech Aliyah" recruitment drive'
                        ],
                        projectionData: [78, 74, 70, 65, 60, 55, 50, 46, 42, 40, 38, 36]
                    }
                ],
                3: [ // Tourism perception gap
                    {
                        name: 'Reality vs Perception Campaign',
                        icon: 'fas fa-camera',
                        color: '#06b6d4',
                        recommended: true,
                        effectiveness: 'Medium-High Impact Â· 3-6 months',
                        description: `<strong>What this is:</strong> Data-driven tourism marketing showing actual visitor experiences vs. media perception. Leverage influencer testimonials and safety statistics.
                        <br><br><strong>Why it works:</strong> Tourism decisions are emotion-driven. Seeing real experiences from trusted sources overcomes abstract security concerns. Testimonial-based campaigns achieve 4x higher conversion than traditional ads.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Influencer Reality Tour (Month 1):</strong> Invite 50 mid-tier travel influencers (100K-500K followers) for subsidized trips. No restrictions on content - authenticity is key. Showcase Tel Aviv nightlife, Dead Sea, Jerusalem history, Haifa beaches, Negev adventures. Let them document real experience.</li>
                        <li><strong>Data Transparency Dashboard (Month 1-2):</strong> Launch public tourism safety dashboard comparing Israel statistics to popular destinations. Show: Tel Aviv has lower crime than Barcelona, Jerusalem safer than Paris, overall tourist incident rate 0.001%. Make data visual and shareable.</li>
                        <li><strong>Testimonial Arsenal (Month 2-3):</strong> Collect 1,000+ recent tourist testimonials. Create "Expectations vs Reality" video series. Highlight families, solo female travelers, LGBTQ+ visitors, diverse demographics sharing safe, positive experiences.</li>
                        <li><strong>Strategic Media Partnerships (Month 3-6):</strong> Partner with travel publications (CondÃ© Nast, Lonely Planet) for feature stories. Sponsor "Israel Uncovered" content series. Position as Mediterranean cultural destination, not just religious pilgrimage site.</li>
                        </ul>`,
                        steps: [
                            'Invite 50 travel influencers for authentic experience documentation',
                            'Launch public tourism safety statistics dashboard',
                            'Create "Expectations vs Reality" testimonial video series',
                            'Partner with major travel publications for feature content'
                        ],
                        projectionData: [64, 60, 56, 52, 48, 44, 40, 38, 36, 34, 33, 32]
                    }
                ],
                4: [ // BDS corporate traction
                    {
                        name: 'Economic Value Proposition Strategy',
                        icon: 'fas fa-chart-line',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· Relationship-based',
                        description: `<strong>What this is:</strong> Shift corporate dialogue from politics to economics. Demonstrate irreplaceable value in supply chains, technology, and innovation partnerships.
                        <br><br><strong>Why it works:</strong> Corporations ultimately answer to shareholders and bottom lines. Companies maintaining Israeli partnerships show 23% higher tech sector profit margins. Make economic case stronger than political pressure.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Supply Chain Analysis (0-2 weeks):</strong> Map all affected corporate relationships. Identify where Israeli suppliers/partners are mission-critical. Create "Replacement Cost Analysis" showing: switching costs, quality gaps, timeline delays. Make disengagement economically painful.</li>
                        <li><strong>Innovation Partnership Showcase (2-4 weeks):</strong> Highlight joint R&D successes. Intel's $25B Israel investment, Google's AI research center, Apple's chip design teams. Show these aren't replaceable - they're strategic assets. Publish case studies of failed competitor attempts to replicate Israeli tech innovation elsewhere.</li>
                        <li><strong>Stakeholder Direct Engagement (1-3 months):</strong> Israeli tech CEOs meet directly with European corporate boards. Present not as political advocacy but as business partners. Focus on: "Here's what we're building together, here's the revenue impact, here's why this partnership drives your stock price."</li>
                        <li><strong>Alternative Market Development (Ongoing):</strong> Simultaneously diversify into Asia-Pacific, Africa, South America. Reduce dependence on any single market. Show European companies they need Israeli innovation more than reverse. Create competitive pressure - "If you exit, your competitors will gain the advantage."</li>
                        </ul>`,
                        steps: [
                            'Create "Replacement Cost Analysis" for critical partnerships',
                            'Showcase irreplaceable joint R&D successes and ROI',
                            'Facilitate CEO-to-Board direct business discussions',
                            'Diversify into Asia-Pacific and emerging markets simultaneously'
                        ],
                        projectionData: [68, 64, 58, 52, 48, 44, 40, 38, 36, 34, 33, 32]
                    }
                ],
                5: [ // Eurovision hosting cost criticism
                    {
                        name: 'Economic Impact Communication Strategy',
                        icon: 'fas fa-chart-bar',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'Medium Impact Â· Domestic Focus',
                        description: `<strong>What this is:</strong> Reframe event hosting as economic investment with measurable ROI. Show tangible benefits to counter cost criticism.
                        <br><br><strong>Why it works:</strong> Public accepts spending when they see personal benefit. Countries showing tourism/economic ROI from hosting events see 78% public approval increase.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Economic Data Release (0-48h):</strong> Ministry of Tourism publishes comprehensive impact study: estimated 50,000 international visitors, $180M in tourism revenue, 2,000 temporary jobs created, long-term "soft power" value. Break down where every shekel goes - not just "event cost" but "economic stimulus."</li>
                        <li><strong>Local Business Testimonials (Week 1):</strong> Interview Tel Aviv hotels, restaurants, tour operators showing booking surges. "My hotel is 100% booked for 2 weeks because of Eurovision." Make it personal and relatable to average citizens seeing business boom.</li>
                        <li><strong>Brand Value Quantification (Week 2):</strong> Commission external analysis of "nation brand" value. Compare to advertising equivalent - "To reach 180M viewers with positive Israel content would cost $400M in traditional advertising. We're doing it for $25M." Show the marketing arbitrage.</li>
                        <li><strong>Comparative Context (Ongoing):</strong> Show other countries' hosting costs and ROI. "Eurovision 2018 Portugal: $35M cost, $140M tourism return. We're competitive and positioned for similar gains." Remove the exceptionalism narrative that makes critics think it's uniquely wasteful.</li>
                        </ul>`,
                        steps: [
                            'Publish comprehensive economic impact study showing $180M tourism ROI',
                            'Feature local business testimonials showing direct benefits',
                            'Commission brand value analysis vs advertising equivalent cost',
                            'Provide international comparison showing competitive ROI'
                        ],
                        projectionData: [58, 54, 50, 46, 42, 40, 38, 36, 35, 34, 33, 32]
                    },
                    {
                        name: 'Cultural Diplomacy Framing',
                        icon: 'fas fa-music',
                        color: '#8b5cf6',
                        recommended: false,
                        effectiveness: 'Medium Impact Â· Image-focused',
                        description: `<strong>What this is:</strong> Position Eurovision as cultural diplomacy tool rather than entertainment expense. Frame as strategic soft power investment.
                        <br><br><strong>Why it works:</strong> Reframing spending from "luxury" to "necessity" changes perception. When public sees strategic value beyond entertainment, support increases 61%.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Strategic Communication (0-72h):</strong> Foreign Ministry explains: "Eurovision reaches 180M Europeans in prime time. It's 3 hours of Israel shown as modern, vibrant, welcoming - the opposite of conflict narratives. This is strategic communication, not a party." Position as counter-narrative tool.</li>
                        <li><strong>Academic Backing (Week 1):</strong> Partner with universities to publish research on "soft power ROI" from cultural events. Show data: countries hosting Eurovision see 23% improvement in tourism perception for 3 years. Cite academic studies making it evidence-based, not opinion.</li>
                        <li><strong>Historical Precedent (Week 2):</strong> Reference successful past Israeli cultural diplomacy - sports events, cultural festivals that improved international perception. Build narrative: "This is how modern countries build relationships in 21st century - through culture, not just politics."</li>
                        <li><strong>Regional Comparison (Ongoing):</strong> Highlight that UAE, Saudi Arabia, Qatar spend billions on sports/culture events for same reason. "Our neighbors understand soft power value - we can't afford to cede this space." Create competitive framing.</li>
                        </ul>`,
                        steps: [
                            'Foreign Ministry frames as strategic soft power investment',
                            'Commission academic research on cultural diplomacy ROI',
                            'Highlight historical successes of Israeli cultural events',
                            'Compare to regional competitors\' cultural investments'
                        ],
                        projectionData: [58, 56, 52, 48, 45, 42, 40, 38, 37, 36, 35, 34]
                    }
                ],
                6: [ // Startup ecosystem valuation concerns
                    {
                        name: 'Ecosystem Maturity Narrative',
                        icon: 'fas fa-seedling',
                        color: '#10b981',
                        recommended: true,
                        effectiveness: 'High Impact Â· Investor Relations',
                        description: `<strong>What this is:</strong> Reframe failures as ecosystem evolution from startup phase to scale-up maturity. Show natural market correction producing stronger companies.
                        <br><br><strong>Why it works:</strong> Tech investors understand market cycles. Framing as "maturation" vs "collapse" maintains confidence. Ecosystems showing post-correction resilience attract 2.3x more capital.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Market Analysis Report (0-2 weeks):</strong> Innovation Authority publishes comprehensive report: "Israeli Tech 2.0 - From Startup Nation to Scale-up Nation." Show data: while some startups failed, total ecosystem value still +18% YoY. Highlight survivors growing stronger, acquiring talent from failed ventures, focusing on sustainable growth not hype.</li>
                        <li><strong>Success Story Spotlight (Week 2-4):</strong> Feature 20 companies that became profitable post-correction. Monday.com, Wix, CyberArk - show mature Israeli companies competing globally. Narrative: "The ecosystem is producing not just exits, but enduring global leaders." Shift from unicorn counting to profit demonstration.</li>
                        <li><strong>Investor Roadshow (Month 1-2):</strong> Send Innovation Authority + successful CEOs to major investment hubs (London, Singapore, NYC). Private meetings with institutional investors. Message: "Correction removed froth. Valuations now rational. Time to invest in resilient companies at attractive prices." Turn crisis into buying opportunity.</li>
                        <li><strong>Structural Reforms (Ongoing):</strong> Announce new regulations: mandatory financial transparency for startups seeking government support, focus R&D grants on path-to-profitability not just innovation. Show ecosystem learning from mistakes, implementing guardrails. Demonstrate responsible stewardship.</li>
                        </ul>`,
                        steps: [
                            'Publish "Startup Nation 2.0" maturity report with resilience data',
                            'Feature 20 profitable Israeli tech companies as success models',
                            'Launch investor roadshow positioning correction as opportunity',
                            'Announce structural reforms demonstrating ecosystem learning'
                        ],
                        projectionData: [62, 58, 54, 50, 46, 42, 40, 38, 36, 35, 34, 33]
                    },
                    {
                        name: 'Diversification & Innovation Shift',
                        icon: 'fas fa-lightbulb',
                        color: '#06b6d4',
                        recommended: false,
                        effectiveness: 'Medium Impact Â· Long-term Strategy',
                        description: `<strong>What this is:</strong> Pivot ecosystem focus from consumer tech to deep tech (cybersecurity, defense tech, agri-tech, water tech, medtech). Leverage unique Israeli strengths.
                        <br><br><strong>Why it works:</strong> Playing to competitive advantages vs competing in crowded consumer markets. Israeli deep tech exits average 40% higher valuations than consumer startups. Strategic differentiation creates investor confidence.
                        <br><br><strong>How to execute:</strong>
                        <ul style="margin-top:8px;padding-left:20px;">
                        <li><strong>Strategic Focus Shift (0-3 months):</strong> Innovation Authority announces new priority sectors: cybersecurity (Israel has 31% global market share), defense tech (leveraging IDF talent), climate tech (water/solar expertise), health tech (COVID showed capabilities). Reallocate 60% of government grants to these sectors. Stop chasing Silicon Valley trends, double down on Israeli advantages.</li>
                        <li><strong>Talent Redeployment (3-6 months):</strong> Partner with failed startups to redirect engineers to priority sectors. Launch "Tech Transition Program" - engineers from consumer startups get subsidies to join cybersecurity/defense companies. Keep talent in ecosystem, just refocus application.</li>
                        <li><strong>Global Partnership Strategy (6-12 months):</strong> Position Israel as "the cybersecurity capital" and "the climate tech lab." Sign formal tech partnerships with US DoD, EU cybersecurity agency, African water ministries. Create demand pull for Israeli innovation in strategic sectors where competition is limited.</li>
                        <li><strong>Long-term Branding (Ongoing):</strong> Retire "Startup Nation" slogan. Adopt "Innovation Defense" or "Deep Tech Hub" positioning. Rebrand around substance over hype, strategic value over consumer apps. Make Israel synonymous with solving hard problems.</li>
                        </ul>`,
                        steps: [
                            'Announce strategic focus shift to deep tech sectors (cyber, defense, climate)',
                            'Launch "Tech Transition Program" redirecting talent to priority sectors',
                            'Sign global partnerships positioning Israel as specialized hub',
                            'Rebrand from "Startup Nation" to "Deep Tech/Strategic Innovation" positioning'
                        ],
                        projectionData: [62, 60, 56, 52, 48, 44, 42, 40, 38, 37, 36, 35]
                    }
                ]
            };

            // Return appropriate strategies based on current tenant
            if (currentTenant === 'israel') {
                return israelStrategies[incidentId] || [];
            }
            if (currentTenant === 'techcorp') {
                return techcorpStrategies[incidentId] || [];
            }

            return strategiesMap[incidentId] || [];
        }

        function renderStrategyChart(incidentId, strategyIndex, strategy) {
            const ctx = document.getElementById(`strategy-chart-${incidentId}-${strategyIndex}`);
            if (!ctx) return;

            // Create realistic curved projection with gradual improvement
            const hours = ['Now', '6h', '12h', '18h', '24h', '36h', '48h', '60h', '72h', '84h', '96h', '108h'];
            const data = strategy.projectionData;

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: hours,
                    datasets: [{
                        label: currentLanguage === 'en' ? 'Negative Sentiment (%)' : 'Sentiment NÃ©gatif (%)',
                        data: data,
                        borderColor: strategy.color,
                        backgroundColor: `${strategy.color}15`,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4, // Smooth curved lines
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        pointBackgroundColor: strategy.color,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            padding: 12,
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y}% negative sentiment`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(148, 163, 184, 0.05)'
                            },
                            ticks: {
                                callback: value => value + '%',
                                font: { size: 11 },
                                color: '#94a3b8'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: { size: 11 },
                                color: '#94a3b8'
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        // ========================================
        // INFLUENCERS
        // ========================================
        function renderInfluencers() {
            if (window.influencersRendered) return;
            window.influencersRendered = true;

            const tbody = document.getElementById('influencers-table');
            tbody.innerHTML = influencers.map(inf => `
                <tr onclick="viewInfluencerDetail(${inf.id})" style="cursor:pointer;">
                    <td><strong>${inf.handle}</strong></td>
                    <td>${inf.followers}</td>
                    <td><span class="chip ${inf.stanceClass}">${inf.stance}</span></td>
                    <td><strong>${inf.impact}</strong>/100</td>
                    <td>
                        <button class="btn-report" onclick="reportInfluencer(event, ${inf.id}, '${inf.handle}')" title="Report this influencer">
                            <i class="fas fa-flag"></i>
                            <span class="report-text">Report</span>
                        </button>
                    </td>
                </tr>
            `).join('');

            // Also render communities
            renderCommunities();
        }

        function renderCommunities() {
            const grid = document.getElementById('communities-grid');
            if (!grid) return;

            const communityKeys = Object.keys(communities);
            const chipClasses = {
                reddit: 'danger',
                kdrama: 'success',
                truecrime: 'success',
                anime: 'info',
                family: 'warning',
                diaspora: 'warning',
                academic: 'danger',
                business: 'success',
                tourism: 'warning',
                ngos: 'danger'
            };
            const chipLabels = {
                reddit: '72% Critical on Pricing',
                kdrama: 'Highly Supportive',
                truecrime: 'Engaged & Positive',
                anime: 'Content-Focused',
                family: 'Concerned About Pricing',
                diaspora: 'Mixed Sentiment',
                academic: 'Growing Opposition',
                business: 'Strong Interest',
                tourism: 'Safety Concerns',
                ngos: 'Highly Critical'
            };

            grid.innerHTML = communityKeys.map(key => {
                const comm = communities[key];
                return `
                    <div class="kpi-card clickable-card" onclick="viewCommunityDetail('${key}')">
                        <div class="kpi-icon" style="background: ${comm.color}20; color: ${comm.color};">
                            <i class="${comm.icon}"></i>
                        </div>
                        <div class="kpi-label">${comm.name}</div>
                        <div class="kpi-value" style="font-size: 24px;">${comm.members}</div>
                        <span class="chip ${chipClasses[key] || 'info'}">${chipLabels[key] || comm.sentiment}</span>
                    </div>
                `;
            }).join('');
        }

        function viewInfluencerDetail(influencerId) {
            const influencer = influencers.find(i => i.id === influencerId);
            if (!influencer) return;

            const modal = document.getElementById('modal-overlay');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');

            title.textContent = influencer.handle;
            content.innerHTML = `
                <div style="margin-bottom:24px;">
                    <div style="display:flex;align-items:center;gap:16px;margin-bottom:20px;">
                        <div style="width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg, var(--primary-color), var(--accent-cyan));display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:bold;color:white;">
                            ${influencer.handle.charAt(1).toUpperCase()}
                        </div>
                        <div style="flex:1;">
                            <h3 style="font-size:20px;font-weight:700;margin-bottom:4px;">${influencer.name}</h3>
                            <p style="color:var(--text-muted);font-size:14px;margin-bottom:8px;">${influencer.handle} â€¢ ${influencer.platform}</p>
                            <span class="chip ${influencer.stanceClass}">${influencer.stance} towards ${tenants[currentTenant].name}</span>
                        </div>
                    </div>
                </div>

                <div style="background:rgba(0,0,0,0.3);border-radius:var(--radius);padding:20px;margin-bottom:24px;">
                    <p style="color:var(--text-secondary);line-height:1.7;font-size:14px;">${influencer.bio}</p>
                </div>

                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;margin-bottom:24px;">
                    <div style="background:var(--bg-card);padding:16px;border-radius:var(--radius);border:1px solid var(--border-color);">
                        <div style="color:var(--text-muted);font-size:12px;margin-bottom:4px;">Followers</div>
                        <div style="font-size:24px;font-weight:700;color:var(--primary-color);">${influencer.followers}</div>
                    </div>
                    <div style="background:var(--bg-card);padding:16px;border-radius:var(--radius);border:1px solid var(--border-color);">
                        <div style="color:var(--text-muted);font-size:12px;margin-bottom:4px;">Engagement</div>
                        <div style="font-size:24px;font-weight:700;color:var(--success);">${influencer.engagement}</div>
                    </div>
                    <div style="background:var(--bg-card);padding:16px;border-radius:var(--radius);border:1px solid var(--border-color);">
                        <div style="color:var(--text-muted);font-size:12px;margin-bottom:4px;">Impact Score</div>
                        <div style="font-size:24px;font-weight:700;color:var(--warning);">${influencer.impact}/100</div>
                    </div>
                    <div style="background:var(--bg-card);padding:16px;border-radius:var(--radius);border:1px solid var(--border-color);">
                        <div style="color:var(--text-muted);font-size:12px;margin-bottom:4px;">Recent Posts</div>
                        <div style="font-size:24px;font-weight:700;color:var(--accent-cyan);">${influencer.recentPosts.toLocaleString()}</div>
                    </div>
                </div>

                <div style="margin-bottom:24px;">
                    <h4 style="font-size:14px;font-weight:700;color:var(--text-muted);margin-bottom:12px;text-transform:uppercase;letter-spacing:1px;">Key Topics</h4>
                    <div style="display:flex;gap:8px;flex-wrap:wrap;">
                        ${influencer.topics.map(topic => `<span class="chip info">${topic}</span>`).join('')}
                    </div>
                </div>

                <div style="background:rgba(59,130,246,0.1);border-radius:var(--radius);padding:16px;border-left:4px solid var(--primary-color);">
                    <div style="font-size:13px;color:var(--text-secondary);">
                        <strong style="color:var(--text-primary);">Recommendation:</strong>
                        ${influencer.stance === 'Critical'
                            ? 'Monitor closely. Engage proactively with transparent communication addressing their concerns.'
                            : influencer.stance === 'Supportive'
                            ? 'Leverage as brand advocate. Consider partnership opportunities for positive messaging.'
                            : 'Maintain relationship. Provide exclusive content and insights to build positive sentiment.'}
                    </div>
                </div>
            `;

            modal.classList.add('active');
        }

        function reportInfluencer(event, influencerId, handle) {
            // Stop event propagation to prevent row click
            event.stopPropagation();

            const influencer = influencers.find(i => i.id === influencerId);
            if (!influencer) return;

            // Show confirmation modal
            const modal = document.getElementById('modal-overlay');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');

            title.innerHTML = '<i class="fas fa-flag" style="color:#dc2626;margin-right:8px;"></i> Report Influencer';
            content.innerHTML = `
                <div style="margin-bottom:24px;">
                    <p style="color:var(--text-secondary);line-height:1.7;margin-bottom:16px;">
                        You are about to flag <strong style="color:var(--text-primary);">${handle}</strong> for review.
                        This influencer will be marked for investigation by the moderation team.
                    </p>
                    <div style="background:rgba(220, 38, 38, 0.1);border-left:3px solid #dc2626;padding:16px;border-radius:8px;margin-bottom:20px;">
                        <div style="color:var(--text-primary);font-weight:600;margin-bottom:8px;">
                            <i class="fas fa-exclamation-triangle" style="color:#dc2626;margin-right:8px;"></i>
                            Report Details
                        </div>
                        <div style="color:var(--text-secondary);font-size:14px;line-height:1.6;">
                            <strong>Handle:</strong> ${influencer.handle}<br>
                            <strong>Name:</strong> ${influencer.name}<br>
                            <strong>Platform:</strong> ${influencer.platform}<br>
                            <strong>Followers:</strong> ${influencer.followers}<br>
                            <strong>Impact Score:</strong> ${influencer.impact}/100
                        </div>
                    </div>
                    <label style="display:block;color:var(--text-secondary);font-size:13px;font-weight:600;margin-bottom:8px;">
                        <i class="fas fa-robot" style="color:var(--primary-color);margin-right:6px;"></i>
                        AI-Suggested Report Reasons
                    </label>
                    <div style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px;">
                        <button onclick="setReportReason('Spreading misinformation or false narratives about ${tenants[currentTenant].name}. Content lacks factual basis and may damage brand reputation.')"
                                style="padding:8px 14px;background:rgba(59,130,246,0.1);border:1px solid rgba(59,130,246,0.3);border-radius:8px;color:var(--primary-color);font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;">
                            <i class="fas fa-exclamation-circle" style="margin-right:4px;"></i>
                            Misinformation
                        </button>
                        <button onclick="setReportReason('Coordinating harassment campaigns or encouraging negative pile-on behavior against ${tenants[currentTenant].name}. Pattern of aggressive targeting detected.')"
                                style="padding:8px 14px;background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);border-radius:8px;color:#ef4444;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;">
                            <i class="fas fa-users-slash" style="margin-right:4px;"></i>
                            Coordinated Harassment
                        </button>
                        <button onclick="setReportReason('Suspected bot or inauthentic account. Engagement patterns and posting behavior suggest automated or paid activity rather than genuine audience.')"
                                style="padding:8px 14px;background:rgba(251,146,60,0.1);border:1px solid rgba(251,146,60,0.3);border-radius:8px;color:#fb923c;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;">
                            <i class="fas fa-robot" style="margin-right:4px;"></i>
                            Suspected Bot
                        </button>
                        <button onclick="setReportReason('Promoting harmful content, hate speech, or extremist views related to ${tenants[currentTenant].name}. Content violates community standards and poses reputational risk.')"
                                style="padding:8px 14px;background:rgba(220,38,38,0.1);border:1px solid rgba(220,38,38,0.3);border-radius:8px;color:#dc2626;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;">
                            <i class="fas fa-ban" style="margin-right:4px;"></i>
                            Harmful Content
                        </button>
                        <button onclick="setReportReason('Violating intellectual property rights by using ${tenants[currentTenant].name} branded content without authorization. Potential trademark/copyright infringement.')"
                                style="padding:8px 14px;background:rgba(139,92,246,0.1);border:1px solid rgba(139,92,246,0.3);border-radius:8px;color:#8b5cf6;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;">
                            <i class="fas fa-copyright" style="margin-right:4px;"></i>
                            IP Violation
                        </button>
                        <button onclick="setReportReason('Manipulating engagement metrics through fake followers, paid likes, or other inauthentic amplification methods. Inflated impact score.')"
                                style="padding:8px 14px;background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.3);border-radius:8px;color:#10b981;font-size:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;">
                            <i class="fas fa-chart-line" style="margin-right:4px;"></i>
                            Fake Engagement
                        </button>
                    </div>
                    <label style="display:block;color:var(--text-secondary);font-size:13px;font-weight:600;margin-bottom:8px;">
                        Additional Details (Optional)
                    </label>
                    <textarea id="report-reason"
                              style="width:100%;min-height:100px;background:var(--bg-card);border:1px solid var(--border-color);border-radius:8px;padding:12px;color:var(--text-primary);font-family:inherit;font-size:14px;resize:vertical;"
                              placeholder="Add custom reason or additional context..."></textarea>
                </div>
                <div style="display:flex;gap:12px;justify-content:flex-end;">
                    <button onclick="closeModal()" style="padding:10px 24px;background:var(--bg-card);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-weight:600;cursor:pointer;transition:all 0.2s ease;">
                        Cancel
                    </button>
                    <button onclick="confirmReport(${influencerId}, '${handle}')" style="padding:10px 24px;background:#dc2626;border:none;border-radius:8px;color:white;font-weight:600;cursor:pointer;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(220, 38, 38, 0.3);">
                        <i class="fas fa-flag" style="margin-right:6px;"></i>
                        Confirm Report
                    </button>
                </div>
            `;

            modal.classList.add('active');
        }

        function confirmReport(influencerId, handle) {
            const reason = document.getElementById('report-reason').value;

            // Show success notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: #dc2626;
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
                z-index: 10000;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 12px;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="font-size:20px;"></i>
                <div>
                    <div style="font-size:14px;">Report Submitted</div>
                    <div style="font-size:12px;opacity:0.9;font-weight:normal;margin-top:2px;">
                        ${handle} has been flagged for review
                    </div>
                </div>
            `;

            document.body.appendChild(notification);

            // Auto-remove notification after 4 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 4000);

            // Close modal
            closeModal();

            // Log to console (in production, this would send to backend)
            console.log('Influencer reported:', {
                id: influencerId,
                handle: handle,
                reason: reason || 'No reason provided',
                timestamp: new Date().toISOString()
            });
        }

        function setReportReason(reason) {
            const textarea = document.getElementById('report-reason');
            if (textarea) {
                textarea.value = reason;
                // Visual feedback
                textarea.style.borderColor = 'var(--primary-color)';
                setTimeout(() => {
                    textarea.style.borderColor = '';
                }, 1000);
            }
        }

        function viewCommunityDetail(communityId) {
            // Use tenant-specific communities
            const community = communities[communityId];
            if (!community) return;

            const modal = document.getElementById('modal-overlay');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');

            title.textContent = community.name;
            content.innerHTML = `
                <div style="margin-bottom:24px;">
                    <div style="display:flex;align-items:center;gap:16px;margin-bottom:20px;">
                        <div style="width:80px;height:80px;border-radius:50%;background:${community.color}20;display:flex;align-items:center;justify-content:center;font-size:32px;color:${community.color};">
                            <i class="${community.icon}"></i>
                        </div>
                        <div style="flex:1;">
                            <h3 style="font-size:20px;font-weight:700;margin-bottom:4px;">${community.name}</h3>
                            <p style="color:var(--text-muted);font-size:14px;">${community.members} members</p>
                        </div>
                    </div>
                </div>

                <div style="background:rgba(0,0,0,0.3);border-radius:var(--radius);padding:20px;margin-bottom:24px;">
                    <p style="color:var(--text-secondary);line-height:1.7;font-size:14px;">${community.description}</p>
                </div>

                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px;margin-bottom:24px;">
                    <div style="background:var(--bg-card);padding:16px;border-radius:var(--radius);border:1px solid var(--border-color);">
                        <div style="color:var(--text-muted);font-size:12px;margin-bottom:4px;">Community Size</div>
                        <div style="font-size:24px;font-weight:700;color:var(--primary-color);">${community.members}</div>
                    </div>
                    <div style="background:var(--bg-card);padding:16px;border-radius:var(--radius);border:1px solid var(--border-color);">
                        <div style="color:var(--text-muted);font-size:12px;margin-bottom:4px;">Overall Sentiment</div>
                        <div style="font-size:20px;font-weight:700;color:${community.color};">${community.sentiment}</div>
                    </div>
                    <div style="background:var(--bg-card);padding:16px;border-radius:var(--radius);border:1px solid var(--border-color);">
                        <div style="color:var(--text-muted);font-size:12px;margin-bottom:4px;">Activity Level</div>
                        <div style="font-size:20px;font-weight:700;color:var(--warning);">${community.activity}</div>
                    </div>
                </div>

                <div style="margin-bottom:24px;">
                    <h4 style="font-size:14px;font-weight:700;color:var(--text-muted);margin-bottom:12px;text-transform:uppercase;letter-spacing:1px;">Sentiment Breakdown</h4>
                    <div style="background:var(--bg-card);border-radius:var(--radius);padding:16px;border:1px solid var(--border-color);">
                        <div style="display:flex;gap:8px;margin-bottom:8px;">
                            <div style="flex:${community.sentiment_breakdown.positive};background:var(--success);height:8px;border-radius:4px;"></div>
                            <div style="flex:${community.sentiment_breakdown.neutral};background:var(--warning);height:8px;border-radius:4px;"></div>
                            <div style="flex:${community.sentiment_breakdown.negative};background:var(--danger);height:8px;border-radius:4px;"></div>
                        </div>
                        <div style="display:flex;gap:16px;font-size:12px;color:var(--text-secondary);">
                            <span><span style="color:var(--success);">â—</span> ${community.sentiment_breakdown.positive}% Positive</span>
                            <span><span style="color:var(--warning);">â—</span> ${community.sentiment_breakdown.neutral}% Neutral</span>
                            <span><span style="color:var(--danger);">â—</span> ${community.sentiment_breakdown.negative}% Negative</span>
                        </div>
                    </div>
                </div>

                <div style="margin-bottom:24px;">
                    <h4 style="font-size:14px;font-weight:700;color:var(--text-muted);margin-bottom:12px;text-transform:uppercase;letter-spacing:1px;">Key Topics</h4>
                    <div style="display:flex;gap:8px;flex-wrap:wrap;">
                        ${community.keyTopics.map(topic => `<span class="chip info">${topic}</span>`).join('')}
                    </div>
                </div>

                <div style="background:rgba(139,92,246,0.1);border-radius:var(--radius);padding:16px;margin-bottom:16px;border-left:4px solid var(--accent-purple);">
                    <div style="font-size:12px;font-weight:700;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;">Recent Activity</div>
                    <div style="font-size:13px;color:var(--text-secondary);">${community.recent_activity}</div>
                </div>

                <div style="background:rgba(59,130,246,0.1);border-radius:var(--radius);padding:16px;border-left:4px solid var(--primary-color);">
                    <div style="font-size:12px;font-weight:700;color:var(--text-muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;">Recommendation</div>
                    <div style="font-size:13px;color:var(--text-secondary);">${community.recommendation}</div>
                </div>
            `;

            modal.classList.add('active');
        }

        // ========================================
        // LOADING STATE HELPER
        // ========================================
        function showButtonLoading(button, callback, delay = 1500) {
            const originalHTML = button.innerHTML;
            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>Loading...</span>';

            setTimeout(() => {
                button.innerHTML = originalHTML;
                button.disabled = false;
                if (callback) callback();
            }, delay);
        }

        // ========================================
        // SIMULATOR
        // ========================================
        function handleSimulationRun(button) {
            showButtonLoading(button, () => runSimulation(), 1200);
        }

        function runSimulation() {
            const scenario = document.getElementById('simulator-scenario').value;

            // Generate mock data for all strategies
            const baseData = [62, 60, 58, 56, 54, 52, 50];
            const monitorData = [62, 61, 60, 59, 58, 57, 56];
            const communityData = [62, 58, 54, 50, 46, 43, 40];
            const statementData = [62, 55, 48, 42, 38, 34, 30];
            const ceoVideoData = [62, 52, 42, 35, 30, 26, 23];

            const summary = currentLanguage === 'en'
                ? 'Comparison of all response strategies over 72 hours. CEO Video Response shows the fastest sentiment recovery, dropping negative sentiment to 23%. Official Statement achieves 30%, Community Engagement reaches 40%, while Monitor Only approaches 56%. No Action baseline declines to 50%.'
                : 'Comparaison de toutes les stratÃ©gies de rÃ©ponse sur 72 heures. La VidÃ©o du PDG montre la rÃ©cupÃ©ration la plus rapide, rÃ©duisant le sentiment nÃ©gatif Ã  23%. Le CommuniquÃ© Officiel atteint 30%, l\'Engagement Communautaire atteint 40%, tandis que la Surveillance Seule approche 56%. La rÃ©fÃ©rence Sans Action dÃ©cline Ã  50%.';

            // Show results
            document.getElementById('simulation-results').style.display = 'block';
            document.getElementById('simulation-summary').textContent = summary;

            // Render chart with all strategies
            const ctx = document.getElementById('simulation-chart');
            if (simulationChart) {
                simulationChart.destroy();
            }

            simulationChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Now', '12h', '24h', '36h', '48h', '60h', '72h'],
                    datasets: [
                        {
                            label: currentLanguage === 'en' ? 'No Action (Baseline)' : 'Sans Action (RÃ©fÃ©rence)',
                            data: baseData,
                            borderColor: '#64748b',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: currentLanguage === 'en' ? 'Monitor Only' : 'Surveillance Seule',
                            data: monitorData,
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.05)',
                            borderWidth: 2.5,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: currentLanguage === 'en' ? 'Community Engagement' : 'Engagement Communautaire',
                            data: communityData,
                            borderColor: '#06b6d4',
                            backgroundColor: 'rgba(6, 182, 212, 0.05)',
                            borderWidth: 2.5,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: currentLanguage === 'en' ? 'Official Statement' : 'CommuniquÃ© Officiel',
                            data: statementData,
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.05)',
                            borderWidth: 2.5,
                            tension: 0.3,
                            pointRadius: 4
                        },
                        {
                            label: currentLanguage === 'en' ? 'CEO Video Response' : 'VidÃ©o du PDG',
                            data: ceoVideoData,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.3,
                            pointRadius: 5
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 15,
                                font: { size: 12 }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { callback: value => value + '%' },
                            title: { display: true, text: currentLanguage === 'en' ? 'Negative Sentiment (%)' : 'Sentiment NÃ©gatif (%)' }
                        }
                    }
                }
            });

            // Scroll to results
            setTimeout(() => {
                document.getElementById('simulation-results').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // ========================================
        // REPORTS
        // ========================================
        function handleViewReport(button, reportType) {
            showButtonLoading(button, () => viewReport(reportType), 800);
        }

        function viewReport(reportType) {
            const modal = document.getElementById('modal-overlay');
            const title = document.getElementById('modal-title');
            const content = document.getElementById('modal-content');

            if (reportType === 'weekly') {
                title.textContent = currentLanguage === 'en' ? 'Weekly Brand Health â€“ France' : 'SantÃ© Hebdomadaire de la Marque â€“ France';
                content.innerHTML = `
                    <div style="margin-bottom:24px;">
                        <h4 style="margin-bottom:12px;">Key Metrics</h4>
                        <ul style="list-style:none;padding:0;">
                            <li style="padding:8px 0;border-bottom:1px solid var(--border-color);">Overall Sentiment: <strong>72/100</strong> <span class="chip success">+3 vs last week</span></li>
                            <li style="padding:8px 0;border-bottom:1px solid var(--border-color);">Total Volume: <strong>142K mentions</strong> <span class="chip warning">+15%</span></li>
                            <li style="padding:8px 0;border-bottom:1px solid var(--border-color);">Active Incidents: <strong>5</strong></li>
                        </ul>
                    </div>
                    <div style="margin-bottom:24px;">
                        <h4 style="margin-bottom:12px;">Key Insights</h4>
                        <ul style="padding-left:20px;">
                            <li style="margin-bottom:8px;">Positive momentum in food blogger community (+8 points)</li>
                            <li style="margin-bottom:8px;">Deepfake incident contained but requires continued monitoring</li>
                            <li style="margin-bottom:8px;">TikTok showing highest growth in brand mentions (42% increase)</li>
                        </ul>
                    </div>
                `;
            } else if (reportType === 'postmortem') {
                title.textContent = currentLanguage === 'en' ? 'Incident Post-Mortem' : 'Post-Mortem d\'Incident';
                content.innerHTML = `
                    <div style="margin-bottom:24px;">
                        <h4 style="margin-bottom:12px;">Timeline</h4>
                        <ul style="padding-left:20px;">
                            <li style="margin-bottom:8px;"><strong>09:17</strong> - Deepfake video first detected on TikTok</li>
                            <li style="margin-bottom:8px;"><strong>09:45</strong> - Alert triggered, response team notified</li>
                            <li style="margin-bottom:8px;"><strong>11:30</strong> - Platform takedown requests submitted</li>
                            <li style="margin-bottom:8px;"><strong>14:00</strong> - Official statement released</li>
                        </ul>
                    </div>
                    <div style="margin-bottom:24px;">
                        <h4 style="margin-bottom:12px;">Lessons Learned</h4>
                        <ul style="padding-left:20px;">
                            <li style="margin-bottom:8px;">Early detection critical for minimizing spread</li>
                            <li style="margin-bottom:8px;">Platform cooperation effective but time-sensitive</li>
                            <li style="margin-bottom:8px;">Proactive CEO communication reduced negative sentiment by 35%</li>
                        </ul>
                    </div>
                `;
            } else {
                title.textContent = currentLanguage === 'en' ? 'Influencer Risk Report' : 'Rapport de Risque Influenceurs';
                content.innerHTML = `
                    <div style="margin-bottom:24px;">
                        <h4 style="margin-bottom:12px;">High-Risk Influencers</h4>
                        <ul style="padding-left:20px;">
                            <li style="margin-bottom:8px;"><strong>@EcoJustice_fr</strong> (450K) - Consistently critical, high reach</li>
                            <li style="margin-bottom:8px;"><strong>@HealthFirst_Paris</strong> (275K) - Focus on sugar content concerns</li>
                        </ul>
                    </div>
                    <div style="margin-bottom:24px;">
                        <h4 style="margin-bottom:12px;">Partnership Opportunities</h4>
                        <ul style="padding-left:20px;">
                            <li style="margin-bottom:8px;"><strong>@NovaFans_FR</strong> (185K) - Strong brand advocate</li>
                            <li style="margin-bottom:8px;"><strong>@FrenchBlogger_</strong> (95K) - Positive coverage, growing audience</li>
                        </ul>
                    </div>
                `;
            }

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal-overlay').classList.remove('active');
        }

        // ========================================
        // LIVE DATA UPDATES
        // ========================================
        let liveDataInterval;
        let timestampInterval;
        let secondsElapsed = 0;

        function updateLiveTimestamp() {
            secondsElapsed++;
            const timestampEl = document.getElementById('live-timestamp');
            if (!timestampEl) return;

            if (secondsElapsed < 60) {
                timestampEl.textContent = secondsElapsed === 0 ? 'Just now' : `${secondsElapsed} seconds ago`;
            } else if (secondsElapsed < 3600) {
                const minutes = Math.floor(secondsElapsed / 60);
                timestampEl.textContent = `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
            } else {
                const hours = Math.floor(secondsElapsed / 3600);
                timestampEl.textContent = `${hours} hour${hours > 1 ? 's' : ''} ago`;
            }
        }

        function animateNumberChange(element, newValue, suffix = '') {
            if (!element) return;
            element.classList.add('number-updating');
            setTimeout(() => {
                element.innerHTML = newValue + suffix;
                element.classList.remove('number-updating');
            }, 250);
        }

        function updateLiveData() {
            // Update sentiment (small fluctuations)
            const sentimentEl = document.getElementById('live-sentiment');
            if (sentimentEl) {
                const currentSentiment = parseInt(sentimentEl.textContent);
                const change = Math.random() > 0.5 ? 1 : -1;
                const newSentiment = Math.max(65, Math.min(78, currentSentiment + change));
                if (newSentiment !== currentSentiment) {
                    animateNumberChange(sentimentEl, newSentiment, '<span style="font-size: 20px; color: var(--text-secondary);">/100</span>');
                }
            }

            // Update volume (gradual increases)
            const volumeEl = document.getElementById('live-volume');
            const trendEl = document.getElementById('live-volume-trend');
            if (volumeEl && Math.random() > 0.7) {
                const currentVolume = parseFloat(volumeEl.textContent.replace('K', ''));
                const increase = (Math.random() * 0.3).toFixed(1);
                const newVolume = (currentVolume + parseFloat(increase)).toFixed(1);
                animateNumberChange(volumeEl, newVolume + 'K');

                if (trendEl) {
                    const newTrend = (12.3 + Math.random() * 2).toFixed(1);
                    trendEl.textContent = `+${newTrend}%`;
                }
            }

            // Occasionally update incidents
            const incidentsEl = document.getElementById('live-incidents');
            if (incidentsEl && Math.random() > 0.95) {
                const incidents = parseInt(incidentsEl.textContent);
                const newIncidents = Math.random() > 0.5 ? incidents + 1 : Math.max(3, incidents - 1);
                if (newIncidents !== incidents) {
                    animateNumberChange(incidentsEl, newIncidents);
                    const detailEl = document.getElementById('live-incidents-detail');
                    if (detailEl) {
                        const high = Math.floor(newIncidents * 0.6);
                        const monitoring = newIncidents - high;
                        detailEl.textContent = `${high} high priority, ${monitoring} monitoring`;
                    }
                }
            }

            // Update activity count on incidents page
            const activityCountEl = document.getElementById('incidents-activity-count');
            if (activityCountEl && Math.random() > 0.8) {
                const currentCount = parseInt(activityCountEl.textContent.split(' ')[0]);
                const newCount = currentCount + Math.floor(Math.random() * 5) + 1;
                animateNumberChange(activityCountEl, newCount + ' events');
            }

            // Update notification badge occasionally
            const notifBadge = document.getElementById('notification-badge');
            if (notifBadge && Math.random() > 0.92) {
                const currentBadge = parseInt(notifBadge.textContent);
                const newBadge = Math.min(9, currentBadge + 1);
                if (newBadge !== currentBadge) {
                    notifBadge.textContent = newBadge;
                    notifBadge.classList.add('number-updating');
                    setTimeout(() => notifBadge.classList.remove('number-updating'), 500);
                }
            }

            // Update mentions count on influencers page
            const mentionsEl = document.getElementById('live-mentions');
            if (mentionsEl && Math.random() > 0.85) {
                const currentMentions = parseInt(mentionsEl.textContent.replace(/,/g, ''));
                const newMentions = currentMentions + Math.floor(Math.random() * 15) + 3;
                animateNumberChange(mentionsEl, newMentions.toLocaleString() + ' mentions');
            }

            // Reset timestamp occasionally
            if (Math.random() > 0.98) {
                secondsElapsed = 0;
            }
        }

        function startLiveUpdates() {
            // Update timestamp every second
            timestampInterval = setInterval(updateLiveTimestamp, 1000);

            // Update live data every 3-5 seconds
            liveDataInterval = setInterval(updateLiveData, 3000 + Math.random() * 2000);
        }

        function stopLiveUpdates() {
            if (timestampInterval) clearInterval(timestampInterval);
            if (liveDataInterval) clearInterval(liveDataInterval);
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            renderNotifications();
            renderOverviewCharts();
            startLiveUpdates();
        });

        // Close notification panel when clicking outside
        document.addEventListener('click', function(e) {
            const panel = document.getElementById('notification-panel');
            const bell = document.querySelector('.notification-bell');
            if (panel && bell && !panel.contains(e.target) && !bell.contains(e.target)) {
                panel.classList.remove('active');
            }
        });

        // Cleanup on page unload
        window.addEventListener('beforeunload', stopLiveUpdates);
    </script>
</body>
</html>